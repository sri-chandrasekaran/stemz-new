(self.webpackChunkstemz_new=self.webpackChunkstemz_new||[]).push([[1406],{2768:e=>{e.exports={call_api:function(e,t,s){const o="https://core-server-nine.vercel.app/api/"+t,n=localStorage.getItem("token"),i={"Content-Type":"application/json"};n&&(i.Authorization=`Bearer ${n}`);const r={method:s,headers:i};return["POST","PUT","PATCH","DELETE"].includes(s)&&e&&(r.body=JSON.stringify(e)),fetch(o,r).then((async e=>{let t;try{t=await e.json()}catch(s){t={message:e.statusText||"Unknown error",status:e.status}}if(((e,t)=>{var s,o,n,i,r;if(401===e.status||403===e.status||(null===t||void 0===t||null===(s=t.message)||void 0===s?void 0:s.toLowerCase().includes("token"))||(null===t||void 0===t||null===(o=t.message)||void 0===o?void 0:o.toLowerCase().includes("unauthorized"))||(null===t||void 0===t||null===(n=t.message)||void 0===n?void 0:n.toLowerCase().includes("expired"))||(null===t||void 0===t||null===(i=t.error)||void 0===i?void 0:i.toLowerCase().includes("token"))||(null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.toLowerCase().includes("unauthorized"))){localStorage.removeItem("token");const e=window.location.pathname,t=encodeURIComponent(e),s=encodeURIComponent("Your session has expired. Please log in again.");return window.location.href=`/login?returnUrl=${t}&message=${s}`,!0}return!1})(e,t)){const s=new Error("Token expired - redirecting to login");throw s.response={status:e.status,statusText:e.statusText,data:t},s}if(!e.ok){const s=new Error(`HTTP ${e.status}: ${e.statusText}`);throw s.response={status:e.status,statusText:e.statusText,data:t},s}return t}))}}},9855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var o=s(5043);const n=s.p+"static/media/starmap.9e7c691bcacce7a317fa73e864997cae.svg",i=s.p+"static/media/starmapfilled.ba5c53c3752d5b17afb5.png";var r=s(3153),a=s(3216),l=s(2768),c=s(579);const d=()=>{const[e,t]=(0,o.useState)(!1),[s,d]=(0,o.useState)(!1),[p,u]=(0,o.useState)(null),[x,h]=(0,o.useState)(!1),[g,b]=(0,o.useState)("Please stay on this page & continue reading to earn worksheet points..."),[m,v]=(0,o.useState)(300),[f,w]=(0,o.useState)(!0),[y,k]=(0,o.useState)(!1),S=((0,a.Zp)(),"astronomy"),C="lesson3",T=e=>{const t=(new Date).toLocaleTimeString();console.log(`[WS ${t}] ${e}`)};(0,o.useEffect)((()=>{if(m>0){const e=setTimeout((()=>{v(m-1),b(`Please stay on this page & continue reading to earn worksheet points... (${m}s)`)}),1e3);return()=>clearTimeout(e)}0===m&&M()}),[m]),(0,o.useEffect)((()=>(T("Worksheet loaded, countdown started"),()=>{T("Cleaning up timers"),p&&clearTimeout(p)})),[]);const j=()=>{k(!0),setTimeout((()=>{w(!1),k(!1)}),500)},M=async()=>{if(!x){T("Marking worksheet as completed"),h(!0),b("\u2713 Marking worksheet as completed...");try{var e,t;T("Fetching current progress data");const s=await(0,l.call_api)(null,"points","GET");if(!s)return T("No user progress data returned"),b("\u274c Error: Could not fetch user progress"),void setTimeout((()=>j()),3e4);T("Progress data received, updating worksheet completion");const o=JSON.parse(JSON.stringify(s));o.courses[S]||(o.courses[S]={lessons:{}}),o.courses[S].lessons[C]||(o.courses[S].lessons[C]={activities:{}}),o.courses[S].lessons[C].activities||(o.courses[S].lessons[C].activities={}),o.courses[S].lessons[C].activities.worksheet||(o.courses[S].lessons[C].activities.worksheet={}),o.courses[S].lessons[C].activities.worksheet.completed=!0,o.courses[S].lessons[C].activities.worksheet.earned=5;const n=(null===(e=o.courses[S].lessons[C].activities.video)||void 0===e?void 0:e.earned)||0;o.courses[S].lessons[C].lessonPoints=n+5;const i=(null===(t=o.courses[S].lessons[C].activities.video)||void 0===t?void 0:t.completed)||!1;o.courses[S].lessons[C].completed=i&&!0;let r=0;Object.values(o.courses[S].lessons).forEach((e=>{r+=e.lessonPoints||0})),o.courses[S].coursePoints=r;const a=Object.values(o.courses[S].lessons).every((e=>e.completed));o.courses[S].completed=a;let c=0;Object.values(o.courses).forEach((e=>{c+=e.coursePoints||0})),o.totalPoints=c,T("Sending updated progress to backend"),b("\u2713 Saving progress...");await(0,l.call_api)(o,"points","POST")&&(T("Points updated successfully"),b("\u2713 Worksheet completed! (5 points earned)"),setTimeout((()=>j()),3e4))}catch(s){console.error("Error updating worksheet completion:",s),b("\u274c Error updating progress"),setTimeout((()=>j()),3e4)}}},P={container:{padding:"20px",fontFamily:"Arial, sans-serif",textAlign:"center"},logo:{maxWidth:"300px",marginBottom:"20px",textAlign:"center"},title:{color:"#254E17",fontSize:"48px",marginBottom:"10px",fontFamily:"Orbitron, sans-serif"},subtitle:{color:"#357717",fontSize:"36px",marginBottom:"30px",fontFamily:"Orbitron, sans-serif"},starMapContainer:{position:"relative",width:"100%",maxWidth:"991px",margin:"0 auto",cursor:"pointer"},starMap:{position:"absolute",top:0,left:0,width:"100%",height:"auto",transition:"opacity 0.5s ease-in-out"},starMapFilled:{opacity:0},starMapFadeOut:{opacity:0},starMapFilledFadeIn:{opacity:1},backButton:{position:"absolute",top:"20px",left:"20px",color:"white",border:"none",borderRadius:"50%",background:s?"#3cb371":"#357717",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"36px",fontWeight:"bold",transform:s?"scale(0.9)":"scale(1)"},speechBubble:{position:"absolute",top:"10px",right:"10px",backgroundColor:"white",border:"3px solid #357717",borderRadius:"20px",padding:"10px 15px",maxWidth:"200px",fontSize:"16px",textAlign:"center",color:"#357717",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)",zIndex:10},speechBubbleTail:{content:'""',position:"absolute",bottom:"-19px",right:"153px",border:"10px solid transparent",borderTopColor:"white",zIndex:11},speechBubbleTailBorder:{content:'""',position:"absolute",bottom:"-26px",right:"150px",border:"13px solid transparent",borderTopColor:"#357717",zIndex:9},instructions:{marginBottom:"30px",lineHeight:"1.6",backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"10px",maxWidth:"991px",margin:"0 auto 30px",textAlign:"left"},printButton:{backgroundColor:"#357717",color:"white",padding:"10px 20px",borderRadius:"5px",border:"none",cursor:"pointer",display:"block",margin:"20px auto",fontSize:"12px",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},completionStatus:{position:"fixed",top:"20px",right:"20px",padding:"10px 15px",backgroundColor:x?"rgba(53, 119, 23, 0.8)":"rgba(41, 128, 185, 0.8)",color:"white",borderRadius:"5px",fontWeight:"bold",zIndex:1e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)",fontSize:"16px",opacity:y?0:1,transform:y?"translateY(-10px)":"translateY(0)",transition:"opacity 0.5s ease, transform 0.5s ease",display:f?"block":"none"}};return(0,c.jsxs)("div",{style:P.container,children:[(0,c.jsx)("button",{onClick:()=>{T("Back button clicked"),setTimeout((()=>{window.history.back()}),500)},style:P.backButton,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:"\u2190"}),(0,c.jsx)("div",{style:P.completionStatus,children:g}),(0,c.jsx)("img",{src:r,alt:"STEMZ Learning",style:P.logo}),(0,c.jsx)("h1",{style:P.title,children:"Star Map"}),(0,c.jsx)("h2",{style:P.subtitle,children:"Astronomy: Lesson 3"}),(0,c.jsxs)("div",{style:P.instructions,children:[(0,c.jsx)("h3",{children:"Instructions:"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"Watch the video carefully and try to identify the constellations shown."}),(0,c.jsx)("li",{children:"Click on the image to reveal the answers and check your work."}),(0,c.jsx)("li",{children:"Click again to hide the answers. Happy searching!"})]}),(0,c.jsx)("p",{style:{textAlign:"center",color:"#666666",fontSize:"14px",marginTop:"10px"},children:"Prefer to practice on paper? Download the printable version below"}),(0,c.jsx)("button",{onClick:()=>{window.open("https://docs.google.com/document/d/e/2PACX-1vRzjSp4DciyO8OjCR_k_nf_4_cbGIzLCWkt7mRAHScRbpH_lqS5D_Q3hvxnseVt6P0KvVcKnSnSNEMe/pub","_blank")},style:P.printButton,children:"Download PDF Version"})]}),(0,c.jsx)("div",{style:P.mainContent,children:(0,c.jsxs)("div",{style:P.starMapContainer,onClick:()=>{t(!e)},children:[(0,c.jsxs)("div",{style:P.speechBubble,children:["Click on the image to reveal all answers!",(0,c.jsx)("div",{style:P.speechBubbleTail}),(0,c.jsx)("div",{style:P.speechBubbleTailBorder})]}),(0,c.jsx)("img",{src:n,alt:"Star Map",style:{...P.starMap,...e?P.starMapFadeOut:{}}}),(0,c.jsx)("img",{src:i,alt:"Star Map with Constellations",style:{...P.starMap,...P.starMapFilled,...e?P.starMapFilledFadeIn:{}}})]})})]})}},3153:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/logo.c9017c166767dbbf195a.png"}}]);
//# sourceMappingURL=1406.b64c4b0f.chunk.js.map