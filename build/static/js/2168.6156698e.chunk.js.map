{"version":3,"file":"static/js/2168.6156698e.chunk.js","mappings":"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","sources":["api.js","components/Footer.js","components/HeroOther.js","components/Navbar.js","components/VideoLessonPage.js","config/api-config.js","services/authService.js"],"sourcesContent":["import { buildApiUrl } from './config/api-config';\n\n// Handle token expiration and redirect to login\nconst handleTokenExpiration = (response, data) => {\n  const isTokenExpired = \n    response.status === 401 || \n    response.status === 403 || \n    data?.message?.toLowerCase().includes('token') ||\n    data?.message?.toLowerCase().includes('unauthorized') ||\n    data?.message?.toLowerCase().includes('expired') ||\n    data?.error?.toLowerCase().includes('token') ||\n    data?.error?.toLowerCase().includes('unauthorized');\n\n  if (isTokenExpired) {\n    // Clear expired token\n    localStorage.removeItem('token');\n    \n    // Redirect to login with return URL\n    const currentPath = window.location.pathname;\n    const returnUrl = encodeURIComponent(currentPath);\n    const message = encodeURIComponent('Your session has expired. Please log in again.');\n    \n    window.location.href = `/login?returnUrl=${returnUrl}&message=${message}`;\n    return true;\n  }\n  \n  return false;\n};\n\nexport function call_api(payload, target, method) {\n  const url = buildApiUrl(target);\n  const token = localStorage.getItem(\"token\");\n\n  const headers = {\n    \"Content-Type\": \"application/json\",\n  };\n\n  if (token) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n\n  const handleResponse = async (response) => {\n    let data;\n    \n    try {\n      data = await response.json();\n    } catch (error) {\n      data = { \n        message: response.statusText || 'Unknown error',\n        status: response.status \n      };\n    }\n    \n    // Check for token expiration first\n    if (handleTokenExpiration(response, data)) {\n      const error = new Error('Token expired - redirecting to login');\n      error.response = {\n        status: response.status,\n        statusText: response.statusText,\n        data: data\n      };\n      throw error;\n    }\n    \n    // Handle other HTTP errors\n    if (!response.ok) {\n      const error = new Error(`HTTP ${response.status}: ${response.statusText}`);\n      error.response = {\n        status: response.status,\n        statusText: response.statusText,\n        data: data\n      };\n      throw error;\n    }\n    \n    return data;\n  };\n\n  const fetchOptions = {\n    method: method,\n    headers: headers,\n  };\n\n  if ([\"POST\", \"PUT\", \"PATCH\", \"DELETE\"].includes(method) && payload) {\n    fetchOptions.body = JSON.stringify(payload);\n  }\n\n  return fetch(url, fetchOptions).then(handleResponse);\n}","import React from 'react';\nimport './Footer.css';\nimport {FaFacebook, FaLinkedin, FaTiktok, FaInstagram, FaTwitter} from 'react-icons/fa'\n\nconst Footer = () => {\n  return (\n    <div className='footer fixed-footer'>\n      <div className='footer-container'>\n        <div className='social'>\n          <a href=\"https://www.facebook.com/alice.gao.96558/\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <FaFacebook size={40} style={{color:'black', marginRight: '1rem'}} />\n          </a>\n          <a href=\"https://www.linkedin.com/company/stemz-learning/\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <FaLinkedin size={40} style={{color:'black', marginRight: '1rem'}} />\n          </a>\n          <a href=\"https://www.tiktok.com/@stemzlearning?_t=8edHU0jxuuUI&_r=1\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <FaTiktok size={40} style={{color:'black', marginRight: '1rem'}} />\n          </a>\n          <a href=\"https://www.instagram.com/stemzlearning\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <FaInstagram size={40} style={{color:'black', marginRight: '1rem'}} />\n          </a>\n          <a href=\"https://www.twitter.com/stemzlearning\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <FaTwitter size={40} style={{color:'black', marginRight: '1rem'}} />\n          </a>\n        </div>\n        {/* Links for Privacy Policy and Terms of Use */}\n        <div className='footer-links' style={{ marginTop: '1rem' }}>\n          <a href=\"https://docs.google.com/document/d/e/2PACX-1vRRlvzMG1MRStuFFvQUnol5KW5UsQ02sfF2Rk2N7nAgY9xEq8wFJyTvciuRNd6oU8mb-VYkL2kFmJZD/pub\" \n             target=\"_blank\" rel=\"noopener noreferrer\" \n             style={{ marginRight: '1rem', color: 'black', textDecoration: 'underline' }}>\n            Privacy Policy\n          </a>\n          <a href=\"https://docs.google.com/document/d/e/2PACX-1vTMxRohPUgQX_kQF-Pdexq_Pv21EVmnKHFsrHh75nh1EWA0zgCRhJeOguMoDwrUFu2qTRI7ZEkBJ5E9/pub\" \n             target=\"_blank\" rel=\"noopener noreferrer\" \n             style={{ color: 'black', textDecoration: 'underline' }}>\n            Terms of Use\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Footer\n","import React from 'react';\nimport './HeroOther.css'\n\nconst Hero = ({ overlayText }) => {\n  return (\n    <div className='hero-other'>\n        <div className=\"hero-overlay\">\n            <p className=\"overlay-text\">{overlayText}</p>\n        </div>\n    </div>\n  )\n}\n\nexport default Hero\n","import React, { useState, useEffect } from 'react';\nimport './Navbar.css';\nimport {FaBars, FaTimes} from 'react-icons/fa';\nimport { Link, useNavigate } from 'react-router-dom';\nimport logo from '../assets/logo.png'\nimport { getCurrentUser } from \"../services/authService\";\n\n\nconst Navbar = () => {\n    const [check, setCheck] = useState(null);\n    const [click, setClick] = useState(false);\n    const [color, setColor] = useState(false);\n    const [activeDropdown, setActiveDropdown] = useState(null);\n    const navigate = useNavigate();\n  \n    const handleClick = () => setClick((prevState) => !prevState);\n  \n    const changeColor = () => {\n      if (window.scrollY >= 45) {\n        setColor(true);\n      } else {\n        setColor(false);\n      }\n    };\n  \n    window.addEventListener('scroll', changeColor);\n  \n    const scrollToTop = () => {\n      window.scrollTo(0, 0);\n      setClick(false); // Close mobile menu when clicking a link\n    };\n\n    const toggleDropdown = (index) => {\n      if (window.innerWidth <= 1100) {\n        setActiveDropdown(activeDropdown === index ? null : index);\n      }\n    };\n\n    const updateDashboard = () => {\n        window.location.href = '/dashboard';\n    };\n\n    const updateOnline = () => {\n        window.location.href = '/online-classes';\n        setClick(false); // Close mobile menu\n    };\n\n    const navigateToDashboard = (e) => {\n        e.preventDefault();\n        navigate('/dashboard');\n        setClick(false); // Close mobile menu\n    };\n    \n    const handleLogout = (e) => {\n      e.preventDefault();\n      // Clear the token from localStorage\n      localStorage.removeItem('token');\n      // Update authentication state\n      setCheck(false);\n      // Navigate to login page\n      navigate('/login');\n    };\n  \n    useEffect(() => {\n      // Check for token in localStorage first\n      const token = localStorage.getItem('token');\n      \n      if (token) {\n        // If token exists in localStorage, we consider user as logged in\n        setCheck(true);\n      } else {\n        // If no token in localStorage, check with the server\n        getCurrentUser()\n          .then((data) => {\n            if (data.success) {\n              setCheck(true);\n            } else {\n              setCheck(false);\n            }\n          })\n          .catch(() => {\n            setCheck(false);\n          });\n      }\n    }, []);\n  \n    if (check === null) {\n      return null; // Render nothing while fetching data\n    }\n  \n    return (\n        <div className={color ? 'header header-bg' : 'header'}>\n            <Link to='/'>\n                <img src={logo} alt=\"STEMz Learning\" className=\"logo\"/>\n            </Link>\n            <ul className={click ? 'nav-menu active' : 'nav-menu'}>\n                <li>\n                    <Link to='/' onClick={scrollToTop}>Home</Link>\n                </li>\n                <li>\n                    <Link to='/about-us' onClick={scrollToTop}>About Us</Link>\n                </li>\n                <li>\n                    <Link to='/online-classes' onClick={updateOnline}>Online Classes</Link>\n                </li>\n                <li className={activeDropdown === 0 ? 'active' : ''} onClick={() => toggleDropdown(0)}>\n                    <Link to='/self-paced-classes' onClick={(e) => window.innerWidth <= 1100 && e.preventDefault()}>\n                        Self-Paced Classes\n                    </Link>\n                    <ul className=\"dropdown-menu\">\n                        <li>\n                            <Link to=\"/astronomy\" onClick={scrollToTop}>Astronomy</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/basicsofcoding\" onClick={scrollToTop}>Basics of Coding</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/biochemistry\" onClick={scrollToTop}>Biochemistry</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/chemistry\" onClick={scrollToTop}>Chemistry</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/circuits\" onClick={scrollToTop}>Circuits</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/environmentalscience\" onClick={scrollToTop}>Environmental Science</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/psychology\" onClick={scrollToTop}>Psychology</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/statistics\" onClick={scrollToTop}>Statistics</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/zoology\" onClick={scrollToTop}>Zoology</Link>\n                        </li>\n                    </ul>\n                </li>\n                <li>\n                    <Link to='/course-boxes' onClick={scrollToTop}>Course Boxes</Link>\n                </li>\n                <li>\n                    <Link to='https://substack.com/@STEMZLEARNING' onClick={scrollToTop}>News</Link>\n                </li>\n                <li className={activeDropdown === 1 ? 'active' : ''} onClick={() => toggleDropdown(1)}>\n                    <Link to='/get-involved' onClick={(e) => window.innerWidth <= 1100 && e.preventDefault()}>\n                        Get Involved\n                    </Link>\n                    <ul className=\"dropdown-menu\">\n                        <li>\n                            <Link to=\"/volunteer\" onClick={scrollToTop}>Volunteers</Link>\n                        </li>\n                    </ul>\n                </li>\n                <li>\n                    <Link to='/contact' onClick={scrollToTop}>Contact</Link>\n                </li>\n                <li className=\"login-item\">\n                    {check ? (\n                        <Link to=\"/dashboard\" onClick={navigateToDashboard} className=\"login-link\">Dashboard</Link>\n                    ) : (\n                        <Link to=\"/login\" onClick={scrollToTop} className=\"login-link\">Log In</Link>\n                    )}\n                </li>\n            </ul>\n            <div className='hamburger' onClick={handleClick}>\n                {click ? (<FaTimes size={20} style={{color: 'black'}} />) : (<FaBars size={20} style={{color: 'black'}}/>)}\n            </div>\n        </div>\n    )\n}\n\nexport default Navbar;","import React, { useState, useEffect, useRef } from \"react\";\nimport Navbar from \"../components/Navbar\";\nimport HeroOther from \"../components/HeroOther\";\nimport Footer from \"../components/Footer\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { call_api } from \"../api\";\nimport \"../pages/css/Allvideo.css\";\n\n/* global YT */ // Tell ESLint that YT is a global variable\n\nconst VideoLessonPage = ({\n  // Required props\n  lessonTitle,\n  lessonNumber = \"lesson1\",\n  courseKey = \"astronomy\",\n  videoUrl,\n\n  // Resource URLs and paths\n  slideshowUrl,\n  worksheetPath = null, // Set to null if no worksheet\n  quizPath = null, // Set to null if no quiz\n\n  // Notes configuration\n  notesUrl,\n  notesLabel,\n\n  // Points configuration (same for both versions)\n  maxVideoPoints = 7,\n  worksheetPoints = 5,\n  quizPoints = 10,\n  completionThreshold = 95,\n\n  // Version type (affects auth checks and which notes to display)\n  isParentVersion = false,\n  bpqQuestions = [],\n}) => {\n  // State variables\n  const [userProgress, setUserProgress] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [videoWatched, setVideoWatched] = useState(0);\n  const [worksheetCompleted, setWorksheetCompleted] = useState(false);\n  const [quizCompleted, setQuizCompleted] = useState(false);\n  const [pointsEarned, setPointsEarned] = useState({\n    video: 0,\n    worksheet: 0,\n    quiz: 0,\n  });\n  const [savingPoints, setSavingPoints] = useState(false);\n  const [statusMessage, setStatusMessage] = useState(\"\");\n\n  // Refs\n  const playerRef = useRef(null);\n  const progressIntervalRef = useRef(null);\n  const statusTimeoutRef = useRef(null);\n\n  // Navigation\n  const navigate = useNavigate();\n\n  // Feature flags\n  const hasWorksheet = worksheetPath !== null;\n  const hasQuiz = quizPath !== null;\n\n  // state variablse specific to bpq\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [showQuestion, setShowQuestion] = useState(false);\n  const [answer, setAnswer] = useState(\"\");\n  const [questionsShown, setQuestionsShown] = useState(new Set());\n\n  useEffect(() => {\n    if (!showQuestion) return; // only active while question is shown\n    if (!answer) return; // skip empty answers\n  \n    const interval = setInterval(async () => {\n      try {\n        const eventData = {\n          questionId: `${lessonNumber}_q${currentQuestionIndex + 1}`,\n          eventType: \"autosave\",\n          value: answer,\n          timestamp: new Date().toISOString(),\n        };\n  \n        console.log(\"ðŸ’¾ Auto-saving snapshot:\", eventData);\n  \n        await call_api(\n          { events: [eventData] },\n          `studentresponses/${courseKey}/lesson/${lessonNumber}/bpq/autosave`,\n          \"POST\"\n        );\n  \n        showStatus(\"âœ“ Response auto-saved\", 1000);\n      } catch (err) {\n        console.error(\"âŒ Error auto-saving response:\", err);\n        showStatus(\"âŒ Auto-save failed\", 1000);\n      }\n    }, 3000); // every 3 seconds\n  \n    return () => clearInterval(interval); // cleanup on unmount or answer change\n  }, [answer, showQuestion, currentQuestionIndex, courseKey, lessonNumber]);  \n  \n\nconst handleAnswerSubmit = async () => {\n  console.log(`Answer submitted for question ${currentQuestionIndex + 1}:`, answer);\n  \n  // Call NLP API to get scores\n  if (answer.trim()) {\n    showStatus(\"Analyzing response...\");\n    \n    const scores = await callNLPAPI(answer);\n    \n    if (scores) {\n      console.log('ðŸŽ¯ NLP ANALYSIS COMPLETE ðŸŽ¯');\n      console.log('=====================================');\n      console.log(`Question ${currentQuestionIndex + 1}: \"${bpqQuestions[currentQuestionIndex]?.text}\"`);\n      console.log(`Student Response: \"${answer}\"`);\n      console.log('=====================================');\n      console.log('ðŸ“Š QUALITATIVE SCORES (out of 20):');\n      console.log(`ðŸŽ¨ Creativity: ${scores.creativity}/20`);\n      console.log(`ðŸ§  Critical Thinking: ${scores.critical_thinking}/20`);\n      console.log(`ðŸ‘ï¸ Observation: ${scores.observation}/20`);\n      console.log(`â“ Curiosity: ${scores.curiosity}/20`);\n      console.log(`ðŸ”§ Problem Solving: ${scores.problem_solving}/20`);\n      console.log('=====================================');\n      \n      // Calculate average score\n      const avgScore = (scores.creativity + scores.critical_thinking + \n                       scores.observation + scores.curiosity + scores.problem_solving) / 5;\n      console.log(`ðŸ“ˆ Average Score: ${avgScore.toFixed(1)}/20`);\n         // Save to backend\n      showStatus(\"Saving response...\");\n      \n      const responseData = {\n        questionId: `${lessonNumber}_q${currentQuestionIndex + 1}`,\n        initialAnswer: answer,\n        finalAnswer: answer, // You can modify this if you implement revision features\n        feedback: \"\", // Add feedback if you implement it\n        scores: {\n          \"Creativity\": scores.creativity,\n          \"Critical Thinking\": scores.critical_thinking,\n          \"Observation\": scores.observation,\n          \"Curiosity\": scores.curiosity,\n          \"Problem Solving\": scores.problem_solving\n        }\n      };\n      \n      try {\n        const saveResponse = await call_api(\n          responseData, \n          `studentresponses/${courseKey}/lesson/${lessonNumber}/bpq`, \n          \"POST\"\n        );\n        \n        if (saveResponse && saveResponse.success) {\n          console.log('âœ… Response saved to backend successfully');\n          showStatus(\"âœ“ Response saved!\");\n        } else {\n          console.log('âŒ Failed to save response to backend');\n          showStatus(\"âŒ Error saving response\");\n        }\n      } catch (error) {\n        console.error('Error saving response:', error);\n        showStatus(\"âŒ Error saving response\");\n      }\n      \n    } else {\n      console.log('âŒ NLP Analysis failed - check Flask server');\n      showStatus(\"âŒ Error analyzing response\");\n    }\n  } else {\n    console.log('âš ï¸ Empty response - skipping NLP analysis');\n  }\n  \n  // Hide the question\n  setShowQuestion(false);\n  setAnswer(\"\");\n  \n  // Resume video playbook\n  if (playerRef.current && typeof playerRef.current.playVideo === \"function\") {\n    playerRef.current.playVideo();\n  }\n};\n\nconst callNLPAPI = async (inputText) => {\n  try {\n    // Step 1: POST request to get EVENT_ID\n    const postResponse = await fetch('https://stemz-learning-qualitative-metrics-nlp.hf.space/gradio_api/call/predict_scores', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        data: [inputText]\n      })\n    });\n\n    if (!postResponse.ok) {\n      throw new Error(`POST request failed: ${postResponse.status}`);\n    }\n\n    const postResult = await postResponse.json();\n    console.log('POST response:', postResult);\n\n    const eventId = postResult.event_id;\n    if (!eventId) {\n      throw new Error('No event_id received');\n    }\n\n    // Step 2: GET request as text (SSE format)\n    const getResponse = await fetch(`https://stemz-learning-qualitative-metrics-nlp.hf.space/gradio_api/call/predict_scores/${eventId}`);\n\n    if (!getResponse.ok) {\n      throw new Error(`GET request failed: ${getResponse.status}`);\n    }\n\n    const responseText = await getResponse.text();\n    console.log('GET response text:', responseText);\n\n    // Parse SSE format to extract the JSON data\n    const lines = responseText.split('\\n');\n    let resultData = null;\n\n    for (const line of lines) {\n      if (line.startsWith('data: ')) {\n        try {\n          const jsonStr = line.substring(6); // Remove 'data: ' prefix\n          const parsed = JSON.parse(jsonStr);\n          console.log('Parsed line:', parsed);\n          \n          // The data is directly an array with the scores object\n          if (Array.isArray(parsed) && parsed.length > 0) {\n            resultData = parsed[0]; // Get the first element of the array\n            break;\n          }\n        } catch (e) {\n          console.log('Failed to parse line:', line, e);\n          continue;\n        }\n      }\n    }\n\n    console.log('Final parsed result:', resultData);\n    return resultData;\n\n  } catch (error) {\n    console.error('Error calling NLP API:', error);\n    return null;\n  }\n};\n\n  const [bpqTimeouts, setBpqTimeouts] = useState([]); // Renamed for clarity\n  const [questionsScheduled, setQuestionsScheduled] = useState(false);\n\n  const clearAllBpqTimeouts = () => {\n    bpqTimeouts.forEach((timeout) => clearTimeout(timeout));\n    // Don't call setBpqTimeouts([]) here \n    console.log(\"Cleared all BPQ timeouts\");\n  };\n\n  const scheduleAllQuestions = () => {\n    if (\n      !playerRef.current ||\n      !bpqQuestions ||\n      bpqQuestions.length === 0 ||\n      questionsScheduled\n    ) {\n      console.log(\"Questions already scheduled or no questions to schedule\");\n      return;\n    }\n  \n    console.log(\"Scheduling all BPQ questions\");\n  \n    // Clear any existing timeouts first - but don't update state\n    bpqTimeouts.forEach((timeout) => clearTimeout(timeout));\n  \n    const newTimeouts = [];\n  \n    bpqQuestions.forEach((question, index) => {\n      if (question && typeof question.time === \"number\") {\n        console.log(\n          `Scheduling question ${index + 1} at ${question.time} seconds:`,\n          question.text\n        );\n  \n        const timeout = setTimeout(() => {\n          console.log(`Showing BPQ question ${index + 1}:`, question.text);\n  \n          // Clear timeouts without updating state\n          bpqTimeouts.forEach((t) => clearTimeout(t));\n  \n          // Pause the video\n          if (\n            playerRef.current &&\n            typeof playerRef.current.pauseVideo === \"function\"\n          ) {\n            playerRef.current.pauseVideo();\n          }\n  \n          // Set the current question and show it\n          setCurrentQuestionIndex(index);\n          setShowQuestion(true);\n        }, question.time * 1000);\n  \n        newTimeouts.push(timeout);\n      }\n    });\n  \n    setBpqTimeouts(newTimeouts); // Only update once with all timeouts\n    setQuestionsScheduled(true);\n  };\n  \n\n  // Log function for debugging\n  const log = (message) => {\n    const timestamp = new Date().toLocaleTimeString();\n    console.log(`[${timestamp}] ${message}`);\n  };\n\n  // Show status message with auto-fade\n  const showStatus = (message, duration = 3000) => {\n    setStatusMessage(message);\n\n    // Clear any existing timeout\n    if (statusTimeoutRef.current) {\n      clearTimeout(statusTimeoutRef.current);\n    }\n\n    // Set new timeout to clear message\n    statusTimeoutRef.current = setTimeout(() => {\n      setStatusMessage(\"\");\n    }, duration);\n  };\n\n  // Token verification\n  useEffect(() => {\n    const verifyToken = async () => {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        log(\"No token found, redirecting to login page\");\n        navigate(\"/login\");\n        return;\n      }\n\n      try {\n        log(\"Token found, verifying...\");\n        const response = await call_api(null, \"auth/verify\", \"POST\");\n\n        if (response && response.success) {\n          log(\"Token verification successful\");\n          setIsAuthenticated(true);\n          setLoading(false);\n        } else {\n          log(\"Token verification failed\");\n          localStorage.removeItem(\"token\");\n          navigate(\"/login\");\n        }\n      } catch (error) {\n        console.error(\"Token verification error:\", error);\n        localStorage.removeItem(\"token\");\n        navigate(\"/login\");\n      }\n    };\n\n    verifyToken();\n  }, [navigate]);\n\n  // Fetch user progress data\n  useEffect(() => {\n    if (!isAuthenticated) return;\n\n    const fetchUserProgress = async () => {\n      try {\n        log(\"Fetching user progress...\");\n        const response = await call_api(null, \"points\", \"GET\");\n\n        log(\"API response received\");\n\n        if (response) {\n          setUserProgress(response);\n\n          // Check if there's course data available\n          if (response.courses && response.courses[courseKey]) {\n            const lesson = response.courses[courseKey].lessons[lessonNumber];\n\n            log(\"Lesson data found\");\n\n            if (lesson) {\n              // Initialize video progress\n              if (lesson.activities && lesson.activities.video) {\n                const savedProgress =\n                  lesson.activities.video.percentWatched || 0;\n                const savedPoints = lesson.activities.video.earned || 0;\n\n                log(`Loading saved video progress: ${savedProgress}%`);\n                log(`Loading saved video points: ${savedPoints}`);\n\n                // Set video progress and points\n                setVideoWatched(savedProgress);\n                setPointsEarned((prev) => ({\n                  ...prev,\n                  video: savedPoints,\n                }));\n              }\n\n              // Initialize worksheet completion if has worksheet\n              if (\n                hasWorksheet &&\n                lesson.activities &&\n                lesson.activities.worksheet\n              ) {\n                const savedCompleted =\n                  lesson.activities.worksheet.completed || false;\n                const savedPoints = lesson.activities.worksheet.earned || 0;\n\n                log(`Loading saved worksheet completion: ${savedCompleted}`);\n                log(`Loading saved worksheet points: ${savedPoints}`);\n\n                setWorksheetCompleted(savedCompleted);\n                setPointsEarned((prev) => ({\n                  ...prev,\n                  worksheet: savedPoints,\n                }));\n              }\n\n              // Initialize quiz completion if has quiz\n              if (hasQuiz && lesson.activities && lesson.activities.quiz) {\n                const savedCompleted =\n                  lesson.activities.quiz.completed || false;\n                const savedPoints = lesson.activities.quiz.earned || 0;\n\n                log(`Loading saved quiz completion: ${savedCompleted}`);\n                log(`Loading saved quiz points: ${savedPoints}`);\n\n                setQuizCompleted(savedCompleted);\n                setPointsEarned((prev) => ({\n                  ...prev,\n                  quiz: savedPoints,\n                }));\n              }\n            }\n          }\n\n          setLoading(false);\n        }\n      } catch (err) {\n        console.error(\"Error fetching course progress:\", err);\n        setLoading(false);\n      }\n    };\n\n    fetchUserProgress();\n  }, [isAuthenticated, courseKey, lessonNumber, hasWorksheet, hasQuiz]);\n\n  // YouTube API initialization\n  useEffect(() => {\n    // Initialize YouTube API\n    const loadYouTubeAPI = () => {\n      log(\"Loading YouTube API\");\n\n      const tag = document.createElement(\"script\");\n      tag.src = \"https://www.youtube.com/iframe_api\";\n\n      const firstScriptTag = document.getElementsByTagName(\"script\")[0];\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n      window.onYouTubeIframeAPIReady = initializePlayer;\n    };\n\n    // Initialize player when API is ready\n    const initializePlayer = () => {\n      log(\"Initializing YouTube player\");\n\n      const iframe = document.getElementById(\"youtube-player\");\n      if (!iframe) {\n        log(\"YouTube iframe not found, will retry\");\n        setTimeout(initializePlayer, 1000);\n        return;\n      }\n\n      try {\n        playerRef.current = new YT.Player(\"youtube-player\", {\n          events: {\n            onReady: onPlayerReady,\n            onStateChange: onPlayerStateChange,\n          },\n        });\n\n        log(\"Player initialized\");\n      } catch (error) {\n        log(\"Error initializing player: \" + error.message);\n      }\n    };\n    \n  // Keep the existing onPlayerReady as is - it only runs once\n  const onPlayerReady = (event) => {\n    console.log(\"Player ready\");\n    playerRef.current = event.target;\n  };\n\n    // // Keep the existing onPlayerReady as is - it only runs once\n    // const onPlayerReady = (event) => {\n    //   console.log(\"Player ready\");\n    //   playerRef.current = event.target;\n\n    //   // Schedule all BPQ questions when player is ready (ONLY ONCE)\n    //   if (bpqQuestions && bpqQuestions.length > 0) {\n    //     scheduleAllQuestions();\n    //   }\n    // };\n\n    // Modified player state change handler - ONLY schedule on first play\n    const onPlayerStateChange = (event) => {\n      const stateNames = {\n        \"-1\": \"UNSTARTED\",\n        0: \"ENDED\",\n        1: \"PLAYING\",\n        2: \"PAUSED\",\n        3: \"BUFFERING\",\n        5: \"CUED\",\n      };\n\n      const stateName = stateNames[event.data] || event.data;\n      console.log(`Player state changed: ${stateName} (${event.data})`);\n\n      // Handle different states\n      if (event.data === 1) {\n        // PLAYING\n        startProgressTracking();\n\n        // REMOVED: Don't schedule questions here anymore\n        // Questions are only scheduled once in onPlayerReady\n      } else if (event.data === 2 || event.data === 0) {\n        // PAUSED or ENDED\n        checkVideoProgress();\n        stopProgressTracking();\n\n        // If video ended, clear all remaining timeouts\n        // if (event.data === 0) {\n        //   clearAllBpqTimeouts();\n        //   setQuestionsScheduled(false);\n        // }\n        if (event.data === 0) {\n          setQuestionsShown(new Set());\n        }\n      }\n    };\n\n    // Start initialization\n    if (window.YT && window.YT.Player) {\n      log(\"YouTube API already loaded\");\n      initializePlayer();\n    } else {\n      loadYouTubeAPI();\n    }\n\n    // Cleanup\n    return () => {\n      log(\"Component unmounting, cleaning up\");\n      stopProgressTracking();\n      window.onYouTubeIframeAPIReady = null;\n\n      if (statusTimeoutRef.current) {\n        clearTimeout(statusTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const startProgressTracking = () => {\n    log(\"Starting progress tracking\");\n\n    // Clear any existing interval\n    if (progressIntervalRef.current) {\n      clearInterval(progressIntervalRef.current);\n    }\n    \n    // Set up new interval - check every 1 second\n    progressIntervalRef.current = setInterval(() => {\n      checkVideoProgress();\n      checkForBPQQuestions(); // ADD THIS LINE\n    }, 1000); // CHANGE from 5000 to 1000\n  };\n\n  // Stop tracking progress\n  const stopProgressTracking = () => {\n    if (!progressIntervalRef.current) return;\n\n    clearInterval(progressIntervalRef.current);\n    progressIntervalRef.current = null;\n    log(\"Stopped progress tracking\");\n  };\n  \n  const checkForBPQQuestions = () => {\n    if (!playerRef.current || !bpqQuestions || bpqQuestions.length === 0 || showQuestion) {\n      return;\n    }\n  \n    try {\n      const currentTime = playerRef.current.getCurrentTime();\n      \n      // Find questions that should be shown at the current time\n      bpqQuestions.forEach((question, index) => {\n        if (question && typeof question.time === 'number') {\n          // Check if we're at or past the question time (within 1 second tolerance)\n          // and haven't shown this question yet\n          if (currentTime >= question.time && \n              currentTime < question.time + 1 && \n              !questionsShown.has(index)) {\n            \n            console.log(`Showing BPQ question ${index + 1} at video time ${currentTime}:`, question.text);\n            \n            // Mark this question as shown\n            setQuestionsShown(prev => new Set([...prev, index]));\n            \n            // Pause the video\n            if (typeof playerRef.current.pauseVideo === \"function\") {\n              playerRef.current.pauseVideo();\n            }\n            \n            // Set the current question and show it\n            setCurrentQuestionIndex(index);\n            setShowQuestion(true);\n            \n            // Break after showing one question\n            return;\n          }\n        }\n      });\n    } catch (error) {\n      console.log(\"Error checking for BPQ questions:\", error);\n    }\n  };\n  \n  // Check video progress\n  const checkVideoProgress = () => {\n    if (!playerRef.current) {\n      log(\"No player available\");\n      return;\n    }\n\n    try {\n      // Verify player methods are available\n      if (\n        typeof playerRef.current.getCurrentTime !== \"function\" ||\n        typeof playerRef.current.getDuration !== \"function\"\n      ) {\n        log(\"Player methods not available\");\n\n        // Attempt to recreate player if methods aren't available\n        if (window.YT && window.YT.Player) {\n          log(\"Recreating player instance\");\n          playerRef.current = new YT.Player(\"youtube-player\", {\n            events: {\n              onReady: (event) => {\n                log(\"Player recreated\");\n                playerRef.current = event.target;\n                setTimeout(checkVideoProgress, 500);\n              },\n            },\n          });\n        }\n        return;\n      }\n\n      // Get times and calculate percentage\n      const currentTime = playerRef.current.getCurrentTime();\n      const duration = playerRef.current.getDuration();\n\n      if (isNaN(currentTime) || isNaN(duration) || duration <= 0) {\n        log(\"Invalid time values\");\n        return;\n      }\n\n      const currentPercent = Math.min(\n        Math.floor((currentTime / duration) * 100),\n        100\n      );\n\n      log(\n        `Current video position: ${currentPercent}% (${currentTime.toFixed(\n          1\n        )}/${duration.toFixed(1)})`\n      );\n\n      // Only update if current position is higher than saved max progress\n      if (currentPercent > videoWatched) {\n        log(`Updating progress: ${videoWatched}% â†’ ${currentPercent}%`);\n        setVideoWatched(currentPercent);\n\n        // Calculate points\n        const points = Math.min(\n          maxVideoPoints,\n          Math.floor((maxVideoPoints * currentPercent) / 100)\n        );\n        log(`Updating points: ${pointsEarned.video} â†’ ${points}`);\n        setPointsEarned((prev) => ({ ...prev, video: points }));\n\n        // Handle completion\n        if (currentPercent >= completionThreshold) {\n          log(\n            `Video fully watched (${currentPercent}% â‰¥ ${completionThreshold}%)`\n          );\n          setVideoWatched(100);\n          setPointsEarned((prev) => ({ ...prev, video: maxVideoPoints }));\n        }\n      } else {\n        log(\n          `Current position (${currentPercent}%) is less than max progress (${videoWatched}%). No update needed.`\n        );\n      }\n    } catch (error) {\n      log(\"Error checking progress: \" + error.message);\n    }\n  };\n\n  // Worksheet click handler\n  const handleWorksheetClick = () => {\n    log(\"Worksheet button clicked, navigating to worksheet\");\n    navigate(worksheetPath);\n  };\n\n  // Quiz click handler\n  const handleQuizClick = () => {\n    log(\"Quiz button clicked, navigating to quiz\");\n    navigate(quizPath);\n  };\n\n  // Update points in backend when they change\n  useEffect(() => {\n    const updateBackend = async () => {\n      if (!userProgress || !isAuthenticated || savingPoints) return;\n\n      // Get current lesson data\n      const currentLesson =\n        userProgress.courses?.[courseKey]?.lessons?.[lessonNumber];\n      if (!currentLesson) return;\n\n      // Check if points have changed\n      const videoPointsChanged =\n        pointsEarned.video !== (currentLesson.activities?.video?.earned || 0);\n      const videoProgressChanged =\n        videoWatched !== (currentLesson.activities?.video?.percentWatched || 0);\n\n      // Only check worksheet changes if there's a worksheet\n      const worksheetPointsChanged = hasWorksheet\n        ? pointsEarned.worksheet !==\n          (currentLesson.activities?.worksheet?.earned || 0)\n        : false;\n      const worksheetCompletionChanged = hasWorksheet\n        ? worksheetCompleted !==\n          (currentLesson.activities?.worksheet?.completed || false)\n        : false;\n\n      // Only check quiz changes if there's a quiz\n      const quizPointsChanged = hasQuiz\n        ? pointsEarned.quiz !== (currentLesson.activities?.quiz?.earned || 0)\n        : false;\n      const quizCompletionChanged = hasQuiz\n        ? quizCompleted !== (currentLesson.activities?.quiz?.completed || false)\n        : false;\n\n      const hasChanges =\n        videoPointsChanged ||\n        worksheetPointsChanged ||\n        quizPointsChanged ||\n        videoProgressChanged ||\n        worksheetCompletionChanged ||\n        quizCompletionChanged;\n\n      log(\"Changes detected: \" + hasChanges);\n\n      if (hasChanges) {\n        log(\"Updating backend with changes\");\n        setSavingPoints(true);\n        showStatus(\"Saving progress...\");\n\n        try {\n          // Create a deep clone of the userProgress\n          const updatedProgress = JSON.parse(JSON.stringify(userProgress));\n\n          // Ensure all needed objects exist\n          if (!updatedProgress.courses[courseKey]) {\n            updatedProgress.courses[courseKey] = { lessons: {} };\n          }\n\n          if (!updatedProgress.courses[courseKey].lessons[lessonNumber]) {\n            updatedProgress.courses[courseKey].lessons[lessonNumber] = {\n              activities: {},\n            };\n          }\n\n          if (\n            !updatedProgress.courses[courseKey].lessons[lessonNumber].activities\n          ) {\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities = {};\n          }\n\n          // Ensure video activity exists\n          if (\n            !updatedProgress.courses[courseKey].lessons[lessonNumber].activities\n              .video\n          ) {\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.video = {};\n          }\n\n          // Ensure worksheet activity exists if there's a worksheet\n          if (\n            hasWorksheet &&\n            !updatedProgress.courses[courseKey].lessons[lessonNumber].activities\n              .worksheet\n          ) {\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.worksheet = {};\n          }\n\n          // Ensure quiz activity exists if there's a quiz\n          if (\n            hasQuiz &&\n            !updatedProgress.courses[courseKey].lessons[lessonNumber].activities\n              .quiz\n          ) {\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.quiz = {};\n          }\n\n          // Update video progress\n          updatedProgress.courses[courseKey].lessons[\n            lessonNumber\n          ].activities.video.percentWatched = videoWatched;\n          updatedProgress.courses[courseKey].lessons[\n            lessonNumber\n          ].activities.video.earned = pointsEarned.video;\n          updatedProgress.courses[courseKey].lessons[\n            lessonNumber\n          ].activities.video.completed = videoWatched >= completionThreshold;\n\n          // Update worksheet progress if there's a worksheet\n          if (hasWorksheet) {\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.worksheet.completed = worksheetCompleted;\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.worksheet.earned = pointsEarned.worksheet;\n          }\n\n          // Update quiz progress if there's a quiz\n          if (hasQuiz) {\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.quiz.completed = quizCompleted;\n            updatedProgress.courses[courseKey].lessons[\n              lessonNumber\n            ].activities.quiz.earned = pointsEarned.quiz;\n          }\n\n          // Calculate total points for this lesson\n          const lessonTotalPoints =\n            pointsEarned.video +\n            (hasWorksheet ? pointsEarned.worksheet : 0) +\n            (hasQuiz ? pointsEarned.quiz : 0);\n\n          // Update lesson points\n          updatedProgress.courses[courseKey].lessons[\n            lessonNumber\n          ].lessonPoints = lessonTotalPoints;\n\n          // Check if lesson is completed\n          const isVideoComplete = videoWatched >= completionThreshold;\n          const isWorksheetComplete = !hasWorksheet || worksheetCompleted;\n          const isQuizComplete = !hasQuiz || quizCompleted;\n\n          const isLessonComplete =\n            isVideoComplete && isWorksheetComplete && isQuizComplete;\n          updatedProgress.courses[courseKey].lessons[lessonNumber].completed =\n            isLessonComplete;\n\n          // Recalculate course points\n          let coursePoints = 0;\n          Object.values(updatedProgress.courses[courseKey].lessons).forEach(\n            (lesson) => {\n              coursePoints += lesson.lessonPoints || 0;\n            }\n          );\n          updatedProgress.courses[courseKey].coursePoints = coursePoints;\n\n          // Check if course is completed\n          const allLessonsCompleted = Object.values(\n            updatedProgress.courses[courseKey].lessons\n          ).every((lesson) => lesson.completed);\n          updatedProgress.courses[courseKey].completed = allLessonsCompleted;\n\n          // Recalculate total points\n          let totalPoints = 0;\n          Object.values(updatedProgress.courses).forEach((course) => {\n            totalPoints += course.coursePoints || 0;\n          });\n          updatedProgress.totalPoints = totalPoints;\n\n          log(\"Sending updated progress to backend\");\n\n          // Send to backend\n          const response = await call_api(updatedProgress, \"points\", \"POST\");\n\n          if (response) {\n            log(\"Points updated successfully\");\n            setUserProgress(updatedProgress);\n            showStatus(\"âœ“ Progress saved!\", 3000);\n          }\n        } catch (error) {\n          console.error(\"Error updating points:\", error);\n          showStatus(\"âŒ Error saving progress\", 3000);\n        } finally {\n          setSavingPoints(false);\n        }\n      }\n    };\n\n    updateBackend();\n  }, [\n    pointsEarned,\n    videoWatched,\n    worksheetCompleted,\n    quizCompleted,\n    userProgress,\n    isAuthenticated,\n    savingPoints,\n    courseKey,\n    lessonNumber,\n    hasWorksheet,\n    hasQuiz,\n    completionThreshold,\n  ]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (statusTimeoutRef.current) {\n        clearTimeout(statusTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      console.log(\"Component unmounting, cleaning up BPQ timeouts\");\n      clearAllBpqTimeouts();\n      setQuestionsScheduled(false);\n    };\n  }, []); \n\n  // Reset BPQ state when video URL changes\n  useEffect(() => {\n    console.log(\"Video URL changed, resetting BPQ state\");\n    setQuestionsShown(new Set());\n    setCurrentQuestionIndex(0);\n    setShowQuestion(false);\n    setAnswer(\"\");\n  }, [videoUrl]);\n\n  if (loading) {\n    return (\n      <div>\n        <Navbar />\n        <HeroOther overlayText={lessonTitle} />\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading lesson content...</p>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  // Extract YouTube video ID from URL if needed\n  const getYoutubeId = (url) => {\n    if (!url.includes(\"youtube.com/\") && !url.includes(\"youtu.be/\")) {\n      // Already an ID\n      return url;\n    }\n\n    const regExp =\n      /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n    return match && match[2].length === 11 ? match[2] : null;\n  };\n\n  const videoId = getYoutubeId(videoUrl);\n  const embedUrl = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=${window.location.origin}`;\n\n  // Calculate total possible points\n  const totalPossiblePoints =\n    maxVideoPoints +\n    (hasWorksheet ? worksheetPoints : 0) +\n    (hasQuiz ? quizPoints : 0);\n\n  return (\n    <div>\n      <Navbar />\n      <HeroOther overlayText={lessonTitle} />\n\n      {/* Status message notification */}\n      {statusMessage && (\n        <div\n          className=\"status-notification\"\n          style={{\n            position: \"fixed\",\n            top: \"150px\",\n            right: \"20px\",\n            padding: \"10px 15px\",\n            backgroundColor: statusMessage.includes(\"Error\")\n              ? \"rgba(231, 76, 60, 0.8)\"\n              : \"#357717\",\n            color: \"white\",\n            borderRadius: \"5px\",\n            fontWeight: \"bold\",\n            zIndex: 1000,\n            boxShadow: \"0 2px 10px rgba(0,0,0,0.2)\",\n            animation: \"fadeIn 0.3s ease-out\",\n            fontSize: \"16px\",\n          }}\n        >\n          {statusMessage}\n        </div>\n      )}\n\n      {showQuestion && currentQuestionIndex < bpqQuestions.length && (\n        <div\n          className=\"question-overlay\"\n          style={{\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            width: \"100%\",\n            height: \"100%\",\n            backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            zIndex: 1000,\n          }}\n        >\n          <div\n            className=\"question-box\"\n            style={{\n              backgroundColor: \"white\",\n              padding: \"30px\",\n              borderRadius: \"10px\",\n              maxWidth: \"500px\",\n              width: \"90%\",\n              textAlign: \"center\",\n            }}\n          >\n            <h3>Question {currentQuestionIndex + 1}</h3>\n            <p style={{ fontSize: \"18px\", marginBottom: \"20px\" }}>\n              {bpqQuestions[currentQuestionIndex]?.text ||\n                \"Question not available\"}\n            </p>\n            <textarea\n              value={answer}\n              onChange={(e) => setAnswer(e.target.value)}\n              placeholder=\"Type your answer here...\"\n              style={{\n                width: \"100%\",\n                minHeight: \"100px\",\n                padding: \"10px\",\n                borderRadius: \"5px\",\n                border: \"1px solid #ccc\",\n                marginBottom: \"20px\",\n                resize: \"vertical\",\n              }}\n            />\n            <button onClick={handleAnswerSubmit}>Submit & Continue</button>\n          </div>\n        </div>\n      )}\n\n      {/* Progress display - show for both versions */}\n      <div className=\"points-status\">\n        <div className=\"points-row\">\n          <span className=\"points-label\">Video progress:</span>\n          <span className=\"points-value\">{videoWatched}%</span>\n          <span className=\"points-earned\">({pointsEarned.video} points)</span>\n        </div>\n\n        {hasWorksheet && (\n          <div className=\"points-row\">\n            <span className=\"points-label\">Worksheet:</span>\n            <span className=\"points-value\">\n              {worksheetCompleted ? \"Completed\" : \"Not completed\"}\n            </span>\n            <span className=\"points-earned\">\n              ({pointsEarned.worksheet} points)\n            </span>\n          </div>\n        )}\n\n        {hasQuiz && (\n          <div className=\"points-row\">\n            <span className=\"points-label\">Quiz:</span>\n            <span className=\"points-value\">\n              {quizCompleted ? \"Completed\" : \"Not completed\"}\n            </span>\n            <span className=\"points-earned\">({pointsEarned.quiz} points)</span>\n          </div>\n        )}\n\n        <div className=\"points-row total\">\n          <span className=\"points-label\">Total lesson points:</span>\n          <span className=\"points-value\">\n            {pointsEarned.video +\n              (hasWorksheet ? pointsEarned.worksheet : 0) +\n              (hasQuiz ? pointsEarned.quiz : 0)}{\" \"}\n            out of {totalPossiblePoints}\n          </span>\n        </div>\n      </div>\n\n      <div className=\"vidbig\">\n        <div id=\"youtube-player-container\">\n          <iframe\n            id=\"youtube-player\"\n            className=\"astrovid\"\n            width=\"700\"\n            height=\"480\"\n            src={embedUrl}\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n          ></iframe>\n        </div>\n      </div>\n\n      <div className=\"centered-container\">\n        {slideshowUrl && (\n          <Link to={slideshowUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n            <button className=\"course-button\">Slideshow</button>\n          </Link>\n        )}\n\n        {hasWorksheet && (\n          <button className=\"course-button\" onClick={handleWorksheetClick}>\n            Worksheet\n          </button>\n        )}\n\n        {hasQuiz && (\n          <button className=\"course-button\" onClick={handleQuizClick}>\n            Quiz\n          </button>\n        )}\n\n        {notesUrl && (\n          <Link to={notesUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n            <button className=\"course-button\">{notesLabel}</button>\n          </Link>\n        )}\n      </div>\n      \n\n      <style jsx>{`\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes fadeOut {\n          from {\n            opacity: 1;\n            transform: translateY(0);\n          }\n          to {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n        }\n      `}</style>\n\n      <div style={{ paddingBottom: \"200px\" }} />\n      <Footer />\n    </div>\n  );\n};\n\nexport default VideoLessonPage;\n","// api-config.js\n// Centralized API base URL configuration for prod and dev.\n\n// Manual switch: set to 'dev' or 'prod'\nexport const API_ENV = 'prod'; // change to 'prod' for production\n\nconst BASES = {\n  prod: 'https://core-server-nine.vercel.app/api',\n  dev: 'http://localhost:3000/api'\n};\n\nexport const API_BASE_URL = BASES[API_ENV].replace(/\\/+$/,'');\n\nexport const buildApiUrl = (path = '') => {\n  const sanitizedPath = String(path || '').replace(/^\\/+/, '');\n  return `${API_BASE_URL}/${sanitizedPath}`;\n};\n\nexport default API_BASE_URL;\n\n\n","import axios from 'axios';\nimport { buildApiUrl } from '../config/api-config';\nimport { jwtDecode } from 'jwt-decode';\n\nfunction authHeaders() {\n  const token = localStorage.getItem('token');\n  const headers = { 'Content-Type': 'application/json' };\n  if (token) headers['Authorization'] = `Bearer ${token}`;\n  return headers;\n}\n\nexport async function getCurrentUser() {\n  const token = localStorage.getItem('token');\n  if (!token) return { success: false };\n\n  try {\n    await axios.post(buildApiUrl('auth/verify'), {}, { headers: authHeaders() });\n    // If verify succeeded, try to decode minimal user info from token\n    let decodedUser = null;\n    try {\n      decodedUser = jwtDecode(token);\n    } catch (_) {\n      // ignore decode errors; still treat as authenticated\n    }\n    return {\n      success: true,\n      dashboardData: decodedUser ? { user: decodedUser } : undefined,\n    };\n  } catch (e) {\n    return { success: false };\n  }\n}\n\nexport async function login(payload) {\n  const res = await axios.post(buildApiUrl('auth/login'), payload, { headers: { 'Content-Type': 'application/json' } });\n  return res.data;\n}\n\nexport async function logout() {\n  // If backend supports explicit logout; otherwise, caller should clear token locally\n  const res = await axios.post(buildApiUrl('auth/logout'), {}, { headers: authHeaders() }).catch(() => ({ data: { success: true } }));\n  return res.data;\n}\n\nexport async function signup(payload) {\n  const res = await axios.post(buildApiUrl('auth/signup'), payload, { headers: { 'Content-Type': 'application/json' } });\n  return res.data;\n}\n\n\n"],"names":["handleTokenExpiration","response","data","_data$message","_data$message2","_data$message3","_data$error","_data$error2","status","message","toLowerCase","includes","error","localStorage","removeItem","currentPath","window","location","pathname","returnUrl","encodeURIComponent","href","call_api","payload","target","method","url","buildApiUrl","token","getItem","headers","fetchOptions","body","JSON","stringify","fetch","then","async","json","statusText","Error","ok","Footer","_jsx","className","children","_jsxs","rel","FaFacebook","size","style","color","marginRight","FaLinkedin","FaTiktok","FaInstagram","FaTwitter","marginTop","textDecoration","_ref","overlayText","Navbar","check","setCheck","useState","click","setClick","setColor","activeDropdown","setActiveDropdown","navigate","useNavigate","addEventListener","changeColor","scrollY","scrollToTop","scrollTo","toggleDropdown","index","innerWidth","useEffect","getCurrentUser","success","catch","Link","to","src","logo","alt","onClick","updateOnline","e","preventDefault","handleClick","prevState","FaTimes","FaBars","_bpqQuestions$current2","lessonTitle","lessonNumber","courseKey","videoUrl","slideshowUrl","worksheetPath","quizPath","notesUrl","notesLabel","maxVideoPoints","worksheetPoints","quizPoints","completionThreshold","isParentVersion","bpqQuestions","userProgress","setUserProgress","loading","setLoading","isAuthenticated","setIsAuthenticated","videoWatched","setVideoWatched","worksheetCompleted","setWorksheetCompleted","quizCompleted","setQuizCompleted","pointsEarned","setPointsEarned","video","worksheet","quiz","savingPoints","setSavingPoints","statusMessage","setStatusMessage","playerRef","useRef","progressIntervalRef","statusTimeoutRef","hasWorksheet","hasQuiz","currentQuestionIndex","setCurrentQuestionIndex","showQuestion","setShowQuestion","answer","setAnswer","questionsShown","setQuestionsShown","Set","interval","setInterval","eventData","questionId","eventType","value","timestamp","Date","toISOString","console","log","events","showStatus","err","clearInterval","callNLPAPI","postResponse","inputText","postResult","eventId","event_id","getResponse","responseText","text","lines","split","resultData","line","startsWith","jsonStr","substring","parsed","parse","Array","isArray","length","bpqTimeouts","setBpqTimeouts","questionsScheduled","setQuestionsScheduled","toLocaleTimeString","duration","arguments","undefined","current","clearTimeout","setTimeout","verifyToken","courses","lesson","lessons","activities","savedProgress","percentWatched","savedPoints","earned","prev","savedCompleted","completed","fetchUserProgress","initializePlayer","document","getElementById","YT","Player","onReady","onPlayerReady","onStateChange","onPlayerStateChange","event","stateName","startProgressTracking","checkVideoProgress","stopProgressTracking","loadYouTubeAPI","tag","createElement","firstScriptTag","getElementsByTagName","parentNode","insertBefore","onYouTubeIframeAPIReady","checkForBPQQuestions","currentTime","getCurrentTime","forEach","question","time","has","pauseVideo","getDuration","isNaN","currentPercent","Math","min","floor","toFixed","points","_userProgress$courses","_userProgress$courses2","_userProgress$courses3","_currentLesson$activi","_currentLesson$activi2","_currentLesson$activi3","_currentLesson$activi4","_currentLesson$activi5","_currentLesson$activi6","_currentLesson$activi7","_currentLesson$activi8","_currentLesson$activi9","_currentLesson$activi10","_currentLesson$activi11","_currentLesson$activi12","currentLesson","videoPointsChanged","videoProgressChanged","worksheetPointsChanged","worksheetCompletionChanged","quizPointsChanged","quizCompletionChanged","hasChanges","updatedProgress","lessonTotalPoints","lessonPoints","isLessonComplete","coursePoints","Object","values","allLessonsCompleted","every","totalPoints","course","updateBackend","timeout","HeroOther","embedUrl","match","getYoutubeId","origin","totalPossiblePoints","position","top","right","padding","backgroundColor","borderRadius","fontWeight","zIndex","boxShadow","animation","fontSize","left","width","height","display","justifyContent","alignItems","maxWidth","textAlign","marginBottom","onChange","placeholder","minHeight","border","resize","trim","scores","_bpqQuestions$current","creativity","critical_thinking","observation","curiosity","problem_solving","avgScore","responseData","initialAnswer","finalAnswer","feedback","saveResponse","playVideo","id","frameBorder","allow","allowFullScreen","handleWorksheetClick","handleQuizClick","jsx","paddingBottom","API_BASE_URL","replace","sanitizedPath","String","authHeaders","axios","post","decodedUser","jwtDecode","_","dashboardData","user"],"sourceRoot":""}