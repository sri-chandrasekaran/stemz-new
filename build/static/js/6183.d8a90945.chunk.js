(self.webpackChunkstemz_new=self.webpackChunkstemz_new||[]).push([[6183],{2768:e=>{e.exports={call_api:function(e,s,o){const t="https://core-server-nine.vercel.app/api/"+s,n=localStorage.getItem("token"),i={"Content-Type":"application/json"};n&&(i.Authorization=`Bearer ${n}`);const l={method:o,headers:i};return["POST","PUT","PATCH","DELETE"].includes(o)&&e&&(l.body=JSON.stringify(e)),fetch(t,l).then((async e=>{let s;try{s=await e.json()}catch(o){s={message:e.statusText||"Unknown error",status:e.status}}if(((e,s)=>{var o,t,n,i,l;if(401===e.status||403===e.status||(null===s||void 0===s||null===(o=s.message)||void 0===o?void 0:o.toLowerCase().includes("token"))||(null===s||void 0===s||null===(t=s.message)||void 0===t?void 0:t.toLowerCase().includes("unauthorized"))||(null===s||void 0===s||null===(n=s.message)||void 0===n?void 0:n.toLowerCase().includes("expired"))||(null===s||void 0===s||null===(i=s.error)||void 0===i?void 0:i.toLowerCase().includes("token"))||(null===s||void 0===s||null===(l=s.error)||void 0===l?void 0:l.toLowerCase().includes("unauthorized"))){localStorage.removeItem("token");const e=window.location.pathname,s=encodeURIComponent(e),o=encodeURIComponent("Your session has expired. Please log in again.");return window.location.href=`/login?returnUrl=${s}&message=${o}`,!0}return!1})(e,s)){const o=new Error("Token expired - redirecting to login");throw o.response={status:e.status,statusText:e.statusText,data:s},o}if(!e.ok){const o=new Error(`HTTP ${e.status}: ${e.statusText}`);throw o.response={status:e.status,statusText:e.statusText,data:s},o}return s}))}}},1802:(e,s,o)=>{"use strict";o.d(s,{A:()=>i});o(5043);var t=o(2774),n=o(579);const i=()=>(0,n.jsx)("div",{className:"footer fixed-footer",children:(0,n.jsx)("div",{className:"footer-container",children:(0,n.jsxs)("div",{className:"social",children:[(0,n.jsx)("a",{href:"https://www.facebook.com/alice.gao.96558/",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(t.iYk,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,n.jsx)("a",{href:"https://www.linkedin.com/company/stemz-learning/",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(t.QEs,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,n.jsx)("a",{href:"https://www.tiktok.com/@stemzlearning?_t=8edHU0jxuuUI&_r=1",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(t.kkU,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,n.jsx)("a",{href:"https://www.instagram.com/stemzlearning",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(t.ao$,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,n.jsx)("a",{href:"https://www.twitter.com/stemzlearning",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(t.feZ,{size:40,style:{color:"black",marginRight:"1rem"}})})]})})})},7956:(e,s,o)=>{"use strict";o.d(s,{A:()=>n});o(5043);var t=o(579);const n=e=>{let{overlayText:s}=e;return(0,t.jsx)("div",{className:"hero-other",children:(0,t.jsx)("div",{className:"hero-overlay",children:(0,t.jsx)("p",{className:"overlay-text",children:s})})})}},8468:(e,s,o)=>{"use strict";o.d(s,{A:()=>u});var t=o(5043),n=o(2774),i=o(3216),l=o(5475),r=o(3153),c=o(6213),a=o(579);const u=()=>{const[e,s]=(0,t.useState)(null),[o,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[g,p]=(0,t.useState)(null),v=(0,i.Zp)();window.addEventListener("scroll",(()=>{window.scrollY>=45?h(!0):h(!1)}));const m=()=>{window.scrollTo(0,0),u(!1)},x=e=>{window.innerWidth<=1100&&p(g===e?null:e)};return(0,t.useEffect)((()=>{localStorage.getItem("token")?s(!0):c.A.get("https://www.stemzlearning.org/dashboard",{withCredentials:!0}).then((e=>{e.data.success?s(!0):s(!1)})).catch((()=>{s(!1)}))}),[]),null===e?null:(0,a.jsxs)("div",{className:d?"header header-bg":"header",children:[(0,a.jsx)(l.N_,{to:"/",children:(0,a.jsx)("img",{src:r,alt:"STEMz Learning",className:"logo"})}),(0,a.jsxs)("ul",{className:o?"nav-menu active":"nav-menu",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/",onClick:m,children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/about-us",onClick:m,children:"About Us"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/online-classes",onClick:()=>{window.location.href="/online-classes",u(!1)},children:"Online Classes"})}),(0,a.jsxs)("li",{className:0===g?"active":"",onClick:()=>x(0),children:[(0,a.jsx)(l.N_,{to:"/self-paced-classes",onClick:e=>window.innerWidth<=1100&&e.preventDefault(),children:"Self-Paced Classes"}),(0,a.jsxs)("ul",{className:"dropdown-menu",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/astronomy",onClick:m,children:"Astronomy"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/basicsofcoding",onClick:m,children:"Basics of Coding"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/biochemistry",onClick:m,children:"Biochemistry"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/chemistry",onClick:m,children:"Chemistry"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/circuits",onClick:m,children:"Circuits"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/environmentalscience",onClick:m,children:"Environmental Science"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/psychology",onClick:m,children:"Psychology"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/statistics",onClick:m,children:"Statistics"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/zoology",onClick:m,children:"Zoology"})})]})]}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/course-boxes",onClick:m,children:"Course Boxes"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"https://substack.com/@STEMZLEARNING",onClick:m,children:"News"})}),(0,a.jsxs)("li",{className:1===g?"active":"",onClick:()=>x(1),children:[(0,a.jsx)(l.N_,{to:"/get-involved",onClick:e=>window.innerWidth<=1100&&e.preventDefault(),children:"Get Involved"}),(0,a.jsx)("ul",{className:"dropdown-menu",children:(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/volunteer",onClick:m,children:"Volunteers"})})})]}),(0,a.jsx)("li",{children:(0,a.jsx)(l.N_,{to:"/contact",onClick:m,children:"Contact"})}),(0,a.jsx)("li",{className:"login-item",children:e?(0,a.jsx)(l.N_,{to:"/dashboard",onClick:e=>{e.preventDefault(),v("/dashboard"),u(!1)},className:"login-link",children:"Dashboard"}):(0,a.jsx)(l.N_,{to:"/login",onClick:m,className:"login-link",children:"Log In"})})]}),(0,a.jsx)("div",{className:"hamburger",onClick:()=>u((e=>!e)),children:o?(0,a.jsx)(n.QCr,{size:20,style:{color:"black"}}):(0,a.jsx)(n.OXb,{size:20,style:{color:"black"}})})]})}},6624:(e,s,o)=>{"use strict";o.d(s,{A:()=>l});var t=o(5043),n=(o(1578),o(2768)),i=(o(8815),o(579));const l=e=>{var s,o,l,r,c,a,u,d,h,g,p,v;let{src:m,courseKey:x,lessonNumber:j}=e;const[w,N]=(0,t.useState)([]),[b,f]=(0,t.useState)({}),[k,C]=(0,t.useState)(!1),[z,y]=(0,t.useState)(0),[S,q]=(0,t.useState)(""),[_,$]=(0,t.useState)(null),[E,P]=(0,t.useState)(!0),[T,A]=(0,t.useState)(0),[I,O]=(0,t.useState)(0),[U,L]=(0,t.useState)(0),[Q,R]=(0,t.useState)(!1),[J,Y]=(0,t.useState)(""),[D,W]=(0,t.useState)(null),B=(0,t.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;Y(e),D&&clearTimeout(D);const o=setTimeout((()=>{Y("")}),s);W(o)}),[D]);(0,t.useEffect)((()=>{console.log(`Loading quiz from source: ${m}`),console.log(`Quiz parameters - courseKey: ${x}, lessonNumber: ${j}`),fetch(m).then((e=>e.text())).then((e=>{const s=JSON.parse(e);console.log("Quiz data loaded:",s),N(s.questions),y(s.total),q(s.title||"Quiz")})).catch((e=>console.error("Error fetching quiz data:",e)))}),[m,x,j]),(0,t.useEffect)((()=>{(async()=>{try{console.log("Fetching user progress data...");const e=await(0,n.call_api)(null,"points","GET");if(e){if(console.log("User progress data received:",JSON.stringify(e,null,2)),$(e),e.courses&&e.courses[x]&&e.courses[x].lessons&&e.courses[x].lessons[j]&&e.courses[x].lessons[j].activities&&e.courses[x].lessons[j].activities.quiz){const s=e.courses[x].lessons[j].activities.quiz;console.log("Existing quiz data found:",s),s.completed&&(A(s.earned||0),O(s.correctAnswers||0),L(s.percentCorrect||0),B&&B(`Your best score: ${s.earned} points`,5e3))}else console.log("No existing quiz data found for this course/lesson");P(!1)}}catch(e){console.error("Error fetching course progress:",e),P(!1)}})()}),[x,j,B]);const G=async(e,s,o)=>{if(_)try{var t,i;R(!0),B("Saving quiz results..."),console.log("Quiz update parameters:",{courseKey:x,lessonNumber:j,quizTitle:S,earnedPoints:e,correctCount:s,percentCorrect:o}),console.log("User progress before update:",JSON.stringify(_,null,2));const l=JSON.parse(JSON.stringify(_));l.courses[x]||(console.log(`Creating missing course: ${x}`),l.courses[x]={title:"astronomy"===x?"Astronomy":x,coursePoints:0,completed:!1,lessons:{}}),l.courses[x].lessons[j]||(console.log(`Creating missing lesson: ${j}`),l.courses[x].lessons[j]={title:"lesson4"===j?"The Universe":j,lessonPoints:0,completed:!1,activities:{}}),l.courses[x].lessons[j].activities||(l.courses[x].lessons[j].activities={}),l.courses[x].lessons[j].activities.quiz||(console.log("Creating missing quiz activity"),l.courses[x].lessons[j].activities.quiz={title:S||"Astronomy Quiz",type:"quiz",completed:!1,points:5,extraPoints:5,questionsCount:w.length,correctAnswers:0,percentCorrect:0,earned:0}),console.log("Updating quiz data with new results");const r=l.courses[x].lessons[j].activities.quiz;r.completed=!0,r.correctAnswers=s,r.percentCorrect=o,r.earned=e,r.questionsCount=w.length;let c=0;const a=l.courses[x].lessons[j].activities;Object.keys(a).forEach((e=>{const s=a[e].earned||0;c+=s,console.log(`Activity ${e} contributes ${s} points`)})),console.log(`Setting lesson points to ${c}`),l.courses[x].lessons[j].lessonPoints=c;const u=(null===(t=l.courses[x].lessons[j].activities.video)||void 0===t?void 0:t.completed)||(null===(i=l.courses[x].lessons[j].activities.video)||void 0===i?void 0:i.percentWatched)>=95;l.courses[x].lessons[j].completed=u,console.log(`Setting lesson completion to ${u} (video completed: ${u}, quiz completed: true)`);let d=0;Object.values(l.courses[x].lessons).forEach((e=>{const s=e.lessonPoints||0;d+=s,console.log(`Lesson "${e.title}" contributes ${s} points`)})),console.log(`Setting course points to ${d}`),l.courses[x].coursePoints=d;let h=0;Object.values(l.courses).forEach((e=>{const s=e.coursePoints||0;h+=s,console.log(`Course "${e.title}" contributes ${s} points`)})),console.log(`Setting total points to ${h}`),l.totalPoints=h,console.log("Updated progress to be sent to backend:",JSON.stringify(l,null,2)),console.log('Calling API with path "points" and method "POST"');const g=await(0,n.call_api)(l,"points","POST");if(console.log("API response:",g),!g)throw new Error("No response from API");$(l),B("\u2713 Quiz results saved!",3e3)}catch(l){console.error("Error updating points:",l),B("\u274c Error saving quiz results",3e3)}finally{R(!1)}else console.error("No user progress data available. Cannot update backend.")};return(0,t.useEffect)((()=>()=>{D&&clearTimeout(D)}),[D]),E?(0,i.jsxs)("div",{className:"quiz-container",children:[(0,i.jsx)("div",{className:"loading-spinner"}),(0,i.jsx)("p",{children:"Loading quiz content..."})]}):(0,i.jsxs)("div",{className:"quiz-container",children:[(0,i.jsx)("h2",{children:S}),(0,i.jsx)("div",{className:"bonus-points-note",children:"Getting all questions correct will reward you with extra points!"}),!k&&(null===_||void 0===_||null===(s=_.courses)||void 0===s||null===(o=s[x])||void 0===o||null===(l=o.lessons)||void 0===l||null===(r=l[j])||void 0===r||null===(c=r.activities)||void 0===c||null===(a=c.quiz)||void 0===a?void 0:a.completed)&&(0,i.jsx)("div",{className:"previous-score-banner",children:(0,i.jsxs)("div",{className:"score-info",children:[(0,i.jsxs)("p",{className:"previous-score-text",children:[(0,i.jsx)("span",{className:"previous-label",children:"Your best score:"}),(0,i.jsxs)("span",{className:"previous-value",children:[_.courses[x].lessons[j].activities.quiz.earned," points"]}),(0,i.jsxs)("span",{className:"previous-details",children:["(",_.courses[x].lessons[j].activities.quiz.correctAnswers," of ",_.courses[x].lessons[j].activities.quiz.questionsCount," correct)"]})]}),10===_.courses[x].lessons[j].activities.quiz.earned&&(0,i.jsx)("p",{className:"perfect-score-message",children:"Perfect score achieved! \ud83c\udfc6"})]})}),J&&(0,i.jsx)("div",{className:"status-notification",style:{position:"fixed",top:"150px",right:"20px",padding:"10px 15px",backgroundColor:J.includes("Error")?"rgba(231, 76, 60, 0.8)":"#357717",color:"white",borderRadius:"5px",fontWeight:"bold",zIndex:1e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:"fadeIn 0.3s ease-out",fontSize:"16px"},children:J}),k&&(0,i.jsx)("div",{className:"quiz-results",children:(0,i.jsxs)("div",{className:"results-summary",children:[(0,i.jsxs)("div",{className:"result-row",children:[(0,i.jsx)("span",{className:"result-label",children:"Correct answers:"}),(0,i.jsxs)("span",{className:"result-value",children:[I," out of ",w.length]}),(0,i.jsxs)("span",{className:"result-percentage",children:["(",U,"%)"]})]}),(0,i.jsxs)("div",{className:"result-row",children:[(0,i.jsx)("span",{className:"result-label",children:"Points earned:"}),(0,i.jsxs)("span",{className:"result-value",children:[T," out of ",I===w.length?10:5," points"]})]})]})}),w.length>0?(0,i.jsxs)("form",{onSubmit:async e=>{var s,o,t,n,i,l;e.preventDefault();let r=0;w.forEach(((e,s)=>{b[s]===e.correctAnswerIndex&&r++}));const c=Math.round(r/w.length*100);console.log(`Quiz results: ${r}/${w.length} correct (${c}%)`);let a=0;r===w.length?(a=10,console.log("Perfect score! Awarding 10 points (5 regular + 5 bonus)")):(a=Math.round(5*r/w.length),console.log(`Partial score. Awarding ${a} points`)),O(r),L(c),A(a),C(!0);const u=(null===_||void 0===_||null===(s=_.courses)||void 0===s||null===(o=s[x])||void 0===o||null===(t=o.lessons)||void 0===t||null===(n=t[j])||void 0===n||null===(i=n.activities)||void 0===i||null===(l=i.quiz)||void 0===l?void 0:l.earned)||0;console.log(`Previous best score: ${u} points`),a>u?(console.log(`New high score! Updating backend with ${a} points`),await G(a,r,c),B(`\u2713 New high score: ${a} points!`,3e3)):a===u?(console.log("Score matches previous best. Not updating backend."),B("You matched your previous score!",3e3)):(console.log("Score is lower than previous best. Not updating backend."),B(`Previous best: ${u} points`,3e3))},children:[w.map(((e,s)=>(0,i.jsxs)("div",{className:"quiz-question",children:[(0,i.jsx)("p",{children:e.question}),e.options.map(((o,t)=>{const n=t===e.correctAnswerIndex,l=b[s]===t&&!n;return(0,i.jsxs)("label",{style:{backgroundColor:k?n?"lightgreen":l?"salmon":"transparent":"transparent"},className:k&&n?"correct-answer":"",children:[(0,i.jsx)("input",{type:"radio",name:`question-${s}`,value:t,onChange:()=>((e,s)=>{f({...b,[e]:s})})(s,t),disabled:k,checked:b[s]===t}),o]},t)}))]},s))),!k&&(0,i.jsx)("button",{type:"submit",disabled:Object.keys(b).length!==w.length,children:"Submit Answers"}),k&&(0,i.jsxs)("div",{className:"quiz-complete-container",children:[(0,i.jsxs)("div",{className:"quiz-complete-message",children:["Quiz completed! ",T>((null===_||void 0===_||null===(u=_.courses)||void 0===u||null===(d=u[x])||void 0===d||null===(h=d.lessons)||void 0===h||null===(g=h[j])||void 0===g||null===(p=g.activities)||void 0===p||null===(v=p.quiz)||void 0===v?void 0:v.earned)||0)?"New high score saved!":"Your best score is still saved."]}),(0,i.jsx)("button",{onClick:()=>{C(!1),f({})},className:"retake-quiz-button",children:"Retake Quiz"})]})]}):(0,i.jsx)("p",{children:"Quiz data could not be loaded."})]})}},1578:()=>{},8815:()=>{},3153:(e,s,o)=>{"use strict";e.exports=o.p+"static/media/logo.c9017c166767dbbf195a.png"}}]);
//# sourceMappingURL=6183.d8a90945.chunk.js.map