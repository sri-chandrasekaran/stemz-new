"use strict";(self.webpackChunkstemz_new=self.webpackChunkstemz_new||[]).push([[5291],{2768:(e,t,o)=>{o.d(t,{E:()=>n});var s=o(3658);const r=(e,t)=>{var o,s,r,n,i;if(401===e.status||403===e.status||(null===t||void 0===t||null===(o=t.message)||void 0===o?void 0:o.toLowerCase().includes("token"))||(null===t||void 0===t||null===(s=t.message)||void 0===s?void 0:s.toLowerCase().includes("unauthorized"))||(null===t||void 0===t||null===(r=t.message)||void 0===r?void 0:r.toLowerCase().includes("expired"))||(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.toLowerCase().includes("token"))||(null===t||void 0===t||null===(i=t.error)||void 0===i?void 0:i.toLowerCase().includes("unauthorized"))){localStorage.removeItem("token");const e=window.location.pathname,t=encodeURIComponent(e),o=encodeURIComponent("Your session has expired. Please log in again.");return window.location.href=`/login?returnUrl=${t}&message=${o}`,!0}return!1};function n(e,t,o){const n=(0,s.KB)(t),i=localStorage.getItem("token"),a={"Content-Type":"application/json"};i&&(a.Authorization=`Bearer ${i}`);const l={method:o,headers:a};return["POST","PUT","PATCH","DELETE"].includes(o)&&e&&(l.body=JSON.stringify(e)),fetch(n,l).then((async e=>{let t;try{t=await e.json()}catch(o){t={message:e.statusText||"Unknown error",status:e.status}}if(r(e,t)){const o=new Error("Token expired - redirecting to login");throw o.response={status:e.status,statusText:e.statusText,data:t},o}if(!e.ok){const o=new Error(`HTTP ${e.status}: ${e.statusText}`);throw o.response={status:e.status,statusText:e.statusText,data:t},o}return t}))}},3658:(e,t,o)=>{o.d(t,{KB:()=>r});const s="https://core-server-nine.vercel.app/api".replace(/\/+$/,""),r=function(){const e=String((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"").replace(/^\/+/,"");return`${s}/${e}`}},5291:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var s=o(5043),r=o(3153),n=o(3216),i=o(2768),a=o(579);const l=[{id:1,text:"Which of the following is the ancestor of a human?",options:[{letter:"a",text:"hippo"},{letter:"b",text:"dinosaur"},{letter:"c",text:"ape"},{letter:"d",text:"kangaroo"}],correctAnswer:"c"},{id:2,text:"Which of the following is the descendant of the dinosaurs? (hint: look for similar traits that were not eliminated through evolution!)",options:[{letter:"a",text:"penguin"},{letter:"b",text:"crocodile"},{letter:"c",text:"elephant"},{letter:"d",text:"porcupine"}],correctAnswer:"b"},{id:3,text:"Which is an example of a neutral mutation for a lion?",options:[{letter:"a",text:"smaller teeth"},{letter:"b",text:"stronger legs"},{letter:"c",text:"sharper senses"},{letter:"d",text:"darker hair"}],correctAnswer:"d"},{id:4,text:"Which islands did Charles Darwin travel to that led him to his discovery?",options:[{letter:"a",text:"Hawaiian Islands"},{letter:"b",text:"Canary Islands"},{letter:"c",text:"Caribbean Islands"},{letter:"d",text:"Galapagos Islands"}],correctAnswer:"d"},{id:5,text:"Mosquitoes becoming immune to pesticides over time is an example of what?",options:[{letter:"a",text:"Harmful Mutation"},{letter:"b",text:"Biodiversity"},{letter:"c",text:"Evolution"},{letter:"d",text:"None of the Above"}],correctAnswer:"c"}];function c(){const e=(0,n.Zp)(),[t,o]=(0,s.useState)({}),[c,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),[g,f]=(0,s.useState)(!0),[m,b]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[y,k]=(0,s.useState)(0),[j,C]=(0,s.useState)(""),S="lesson2",T="zoology",A=(0,s.useRef)(null),E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;C(e),A.current&&clearTimeout(A.current),A.current=setTimeout((()=>C("")),t)};(0,s.useEffect)((()=>{(async()=>{if(localStorage.getItem("token"))try{const t=await(0,i.E)(null,"auth/verify","POST");t&&t.success?(b(!0),f(!1)):(localStorage.removeItem("token"),e("/login"))}catch(t){console.error("Token verification error:",t),localStorage.removeItem("token"),e("/login")}else e("/login")})()}),[e]),(0,s.useEffect)((()=>{if(!m)return;(async()=>{try{const e=await(0,i.E)(null,"points","GET");if(e){if(h(e),e.courses&&e.courses[T]){const t=e.courses[T].lessons[S];if(t&&t.activities&&t.activities.worksheet){const e=t.activities.worksheet.completed||!1,o=t.activities.worksheet.earned||0;w(e),k(o)}}f(!1)}}catch(e){console.error("Error fetching course progress:",e),f(!1)}})()}),[m,T,S]);const I=(e,o)=>{const s={padding:"15px",border:"1px solid #ddd",borderRadius:"5px",cursor:c?"default":"pointer",transition:"all 0.3s ease",backgroundColor:"white",marginBottom:"8px"};if(!c&&t[e]===o)return{...s,backgroundColor:"#e8f5e9",border:"1px solid #3cb371"};if(c){if(o===l.find((t=>t.id===e)).correctAnswer)return{...s,backgroundColor:"rgba(60, 179, 113, 0.2)",border:"1px solid #3cb371"};if(t[e]===o)return{...s,backgroundColor:"rgba(207, 52, 52, 0.2)",border:"1px solid #CF3434"}}return s},P=()=>Object.keys(t).length===l.length&&l.every((e=>t[e.id]===e.correctAnswer));return g?(0,a.jsx)("div",{style:{minHeight:"100vh",background:"white",margin:0,padding:"32px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"Arial, sans-serif"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #357717",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 2s linear infinite",margin:"0 auto 20px"}}),(0,a.jsx)("p",{children:"Loading worksheet content..."}),(0,a.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]})}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"white",margin:"0",padding:"32px",fontFamily:"Arial, sans-serif",position:"relative"},children:[j&&(0,a.jsx)("div",{style:{position:"fixed",top:"150px",right:"20px",padding:"10px 15px",backgroundColor:j.includes("Error")?"rgba(231, 76, 60, 0.8)":"#357717",color:"white",borderRadius:"5px",fontWeight:"bold",zIndex:1e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:"fadeIn 0.3s ease-out",fontSize:"16px"},children:j}),(0,a.jsx)("button",{onClick:()=>{window.history.back()},style:{position:"absolute",top:"20px",left:"20px",color:"white",border:"none",borderRadius:"50%",background:u?"#3cb371":"#357717",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"36px",fontWeight:"bold",transform:u?"scale(0.9)":"scale(1)"},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:"\u2190"}),(0,a.jsxs)("div",{style:{maxWidth:"896px",margin:"0 auto"},children:[(0,a.jsx)("img",{src:r,alt:"STEMZ Learning",style:{maxWidth:"300px",display:"block",margin:"0 auto 30px"}}),(0,a.jsx)("h1",{style:{color:"#254E17",fontSize:"48px",marginBottom:"10px",fontFamily:"Orbitron, sans-serif",textAlign:"center"},children:"Darwin's Theory of Evolution"}),(0,a.jsx)("h2",{style:{color:"#357717",fontSize:"36px",marginBottom:"30px",fontFamily:"Orbitron, sans-serif",textAlign:"center"},children:"Zoology: Lesson 2"}),(0,a.jsxs)("div",{style:{marginBottom:"20px",padding:"10px 15px",borderRadius:"5px",backgroundColor:"#f0f0f0",textAlign:"center",borderLeft:v?"4px solid #3cb371":"4px solid #ccc"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",marginRight:"15px",color:"#333333"},children:"Worksheet:"}),(0,a.jsx)("span",{style:{color:v?"#3cb371":"#666666",fontWeight:v?"bold":"normal"},children:v?"Completed":"Not Completed"}),(0,a.jsxs)("span",{style:{marginLeft:"15px",color:"#555555"},children:["(",y," ",1===y?"point":"points",")"]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"#f9f9f9",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"20px",marginBottom:"30px"},children:[(0,a.jsx)("h3",{style:{color:"#333333",marginTop:0,marginBottom:"10px"},children:"Instructions:"}),(0,a.jsx)("p",{style:{margin:0},children:"Click on the correct answer for each question."})]}),l.map((e=>(0,a.jsxs)("div",{style:{marginBottom:"30px",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,a.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"15px"},children:[e.id,". ",e.text]}),(0,a.jsx)("div",{style:{display:"grid",gap:"10px"},children:e.options.map((t=>(0,a.jsxs)("div",{onClick:()=>{return s=e.id,r=t.letter,void(c||o((e=>({...e,[s]:r}))));var s,r},style:I(e.id,t.letter),children:[t.letter,". ",t.text]},t.letter)))}),c&&(0,a.jsx)("div",{style:{marginTop:"10px",fontSize:"14px",color:t[e.id]===e.correctAnswer?"#3cb371":"#CF3434"},children:t[e.id]===e.correctAnswer?"\u2713 Correct!":`\u2717 The correct answer is ${e.correctAnswer}.`})]},e.id))),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginTop:"30px"},children:[(0,a.jsx)("button",{onClick:()=>{if(d(!0),Object.keys(t).length!==l.length)return;let e=0;l.forEach((o=>{t[o.id]===o.correctAnswer&&e++}));const o=Math.round(e/l.length*5);w(!0),k(o),(async(e,o,s)=>{try{E("Saving worksheet responses...");const r={attemptNumber:1,answers:l.map((e=>{var o,s;return{questionId:`${T}_lesson${S}_q${e.id}`,questionText:e.text,selectedAnswer:(null===(o=e.options.find((o=>o.letter===t[e.id])))||void 0===o?void 0:o.text)||"No answer selected",selectedLetter:t[e.id]||"No answer selected",correctAnswer:(null===(s=e.options.find((t=>t.letter===e.correctAnswer)))||void 0===s?void 0:s.text)||"",correctLetter:e.correctAnswer,correct:t[e.id]===e.correctAnswer}})),score:e,total:5,correctCount:o,totalQuestions:s,percentCorrect:Math.round(o/s*100),submittedAt:new Date};console.log("Saving worksheet response data:",r);const n=await(0,i.E)(r,`studentresponses/${T}/lesson/${S}/worksheet`,"POST");return n&&n.success?(console.log("\u2705 Worksheet responses saved to backend successfully"),E("\u2713 Worksheet responses saved!"),!0):(console.log("\u274c Failed to save worksheet responses to backend"),E("\u274c Error saving worksheet responses"),!1)}catch(r){return console.error("Error saving worksheet responses:",r),E("\u274c Error saving worksheet responses"),!1}})(o,e,l.length),setTimeout((()=>{var e;const t={...x};t.courses||(t.courses={}),t.courses[T]||(t.courses[T]={lessons:{},title:"Zoology"}),t.courses[T].lessons||(t.courses[T].lessons={}),t.courses[T].lessons[S]||(t.courses[T].lessons[S]={activities:{},title:"Darwin's Theory of Evolution"}),t.courses[T].lessons[S].activities||(t.courses[T].lessons[S].activities={}),t.courses[T].lessons[S].activities.worksheet={completed:!0,earned:o,points:5,type:"worksheet",title:"Evolution Quiz"},t.courses[T].lessons[S].lessonPoints=o,null!==(e=t.courses[T].lessons[S].activities.video)&&void 0!==e&&e.completed&&(t.courses[T].lessons[S].completed=!0);let s=0;Object.values(t.courses[T].lessons).forEach((e=>{s+=e.lessonPoints||0})),t.courses[T].coursePoints=s;let r=0;Object.values(t.courses).forEach((e=>{r+=e.coursePoints||0})),t.totalPoints=r,(0,i.E)(t,"points","POST").then((e=>{e&&(h(t),E("\u2713 Progress saved!",3e3))})).catch((e=>{console.error("Update error:",e),E("\u274c Error saving progress",3e3)}))}),500)},disabled:c,style:{padding:"12px 25px",fontSize:"16px",backgroundColor:c?"#cccccc":"#3cb371",color:"white",border:"none",borderRadius:"5px",cursor:c?"default":"pointer",transition:"all 0.3s ease"},children:"Check Answers"}),(0,a.jsx)("button",{onClick:()=>{o({}),d(!1)},style:{padding:"12px 25px",fontSize:"16px",backgroundColor:"#CF3434",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"all 0.3s ease"},children:"Reset"})]}),c&&(0,a.jsxs)("div",{style:{marginTop:"30px",textAlign:"center",padding:"15px",backgroundColor:P()?"#e8f5e9":"#ffebee",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[(0,a.jsx)("p",{style:{color:P()?"#3cb371":"#CF3434",fontSize:"18px",fontWeight:"bold"},children:0===Object.keys(t).length?"Please answer some questions before checking.":P()?"Congratulations! All answers are correct!":Object.keys(t).length<l.length?"Please answer all questions before checking.":"Some answers are incorrect. Please review and try again."}),!P()&&Object.keys(t).length===l.length&&(0,a.jsxs)("p",{style:{color:"#555",marginBottom:0},children:["You got"," ",l.filter((e=>t[e.id]===e.correctAnswer)).length," ","out of ",l.length," correct."]})]})]}),(0,a.jsx)("style",{jsx:!0,children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes fadeOut {\n          from {\n            opacity: 1;\n            transform: translateY(0);\n          }\n          to {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n        }\n      "})]})}},3153:(e,t,o)=>{e.exports=o.p+"static/media/logo.c9017c166767dbbf195a.png"}}]);
//# sourceMappingURL=5291.8af11179.chunk.js.map