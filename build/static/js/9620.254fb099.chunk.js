"use strict";(self.webpackChunkstemz_new=self.webpackChunkstemz_new||[]).push([[9620],{2768:(e,s,t)=>{t.d(s,{E:()=>r});var o=t(3658);const n=(e,s)=>{var t,o,n,r,i;if(401===e.status||403===e.status||(null===s||void 0===s||null===(t=s.message)||void 0===t?void 0:t.toLowerCase().includes("token"))||(null===s||void 0===s||null===(o=s.message)||void 0===o?void 0:o.toLowerCase().includes("unauthorized"))||(null===s||void 0===s||null===(n=s.message)||void 0===n?void 0:n.toLowerCase().includes("expired"))||(null===s||void 0===s||null===(r=s.error)||void 0===r?void 0:r.toLowerCase().includes("token"))||(null===s||void 0===s||null===(i=s.error)||void 0===i?void 0:i.toLowerCase().includes("unauthorized"))){localStorage.removeItem("token");const e=window.location.pathname,s=encodeURIComponent(e),t=encodeURIComponent("Your session has expired. Please log in again.");return window.location.href=`/login?returnUrl=${s}&message=${t}`,!0}return!1};function r(e,s,t){const r=(0,o.KB)(s),i=localStorage.getItem("token"),a={"Content-Type":"application/json"};i&&(a.Authorization=`Bearer ${i}`);const l={method:t,headers:a};return["POST","PUT","PATCH","DELETE"].includes(t)&&e&&(l.body=JSON.stringify(e)),fetch(r,l).then((async e=>{let s;try{s=await e.json()}catch(t){s={message:e.statusText||"Unknown error",status:e.status}}if(n(e,s)){const t=new Error("Token expired - redirecting to login");throw t.response={status:e.status,statusText:e.statusText,data:s},t}if(!e.ok){const t=new Error(`HTTP ${e.status}: ${e.statusText}`);throw t.response={status:e.status,statusText:e.statusText,data:s},t}return s}))}},3658:(e,s,t)=>{t.d(s,{KB:()=>n});const o="https://core-server-nine.vercel.app/api".replace(/\/+$/,""),n=function(){const e=String((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"").replace(/^\/+/,"");return`${o}/${e}`}},9620:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var o=t(5043),n=t(3153),r=t(3216),i=t(2768),a=t(579);const l=["Elephants","Lion","Crocodile","Horses"],c=["Mosquito","Cheetah","Giraffe","Birds"],d=[{value:"mutualism",label:"Mutualism (both benefit)",color:"#90EE90"},{value:"commensalism",label:"Commensalism (one benefits, other neutral)",color:"#87CEEB"},{value:"predation",label:"Predation (one eats other)",color:"#FFB6C1"},{value:"parasitism",label:"Parasitism (one benefits, other is harmed)",color:"#DDA0DD"},{value:"competition",label:"Competition (competing for resources)",color:"#F0E68C"},{value:"neutralism",label:"Neutralism (unaffected by each other)",color:"#D3D3D3"}],p={"Elephants-Mosquito":"parasitism","Elephants-Cheetah":"neutralism","Elephants-Giraffe":"competition","Elephants-Birds":"commensalism","Lion-Mosquito":"parasitism","Lion-Cheetah":"competition","Lion-Giraffe":"predation","Lion-Birds":"neutralism","Crocodile-Mosquito":"parasitism","Crocodile-Cheetah":"neutralism","Crocodile-Giraffe":"predation","Crocodile-Birds":"commensalism","Horses-Mosquito":"parasitism","Horses-Cheetah":"predation","Horses-Giraffe":"competition","Horses-Birds":"mutualism"},u="Elephants";function h(){const e=(0,r.Zp)(),[s,t]=(0,o.useState)({}),[h,x]=(0,o.useState)(null),[g,f]=(0,o.useState)(!1),[m,b]=(0,o.useState)({}),[v,y]=(0,o.useState)(!1),[k,w]=(0,o.useState)(null),[j,C]=(0,o.useState)(!0),[S,E]=(0,o.useState)(!1),[$,T]=(0,o.useState)(!1),[B,R]=(0,o.useState)(0),[A,I]=(0,o.useState)(""),O="lesson4",P="zoology",F=(0,o.useRef)(null),L=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;I(e),F.current&&clearTimeout(F.current),F.current=setTimeout((()=>I("")),s)};(0,o.useEffect)((()=>{(async()=>{if(localStorage.getItem("token"))try{const s=await(0,i.E)(null,"auth/verify","POST");s&&s.success?(E(!0),C(!1)):(localStorage.removeItem("token"),e("/login"))}catch(s){console.error("Token verification error:",s),localStorage.removeItem("token"),e("/login")}else e("/login")})()}),[e]),(0,o.useEffect)((()=>{if(!S)return;(async()=>{try{const e=await(0,i.E)(null,"points","GET");if(e){if(w(e),e.courses&&e.courses[P]){const s=e.courses[P].lessons[O];if(s&&s.activities&&s.activities.worksheet){const e=s.activities.worksheet.completed||!1,t=s.activities.worksheet.earned||0;T(e),R(t)}}C(!1)}}catch(e){console.error("Error fetching course progress:",e),C(!1)}})()}),[S,P,O]);const z=(e,t)=>{const o=`${e}-${t}`;return s[o]===p[o]};return j?(0,a.jsx)("div",{style:{minHeight:"100vh",background:"white",margin:0,padding:"32px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"Arial, sans-serif"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #357717",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 2s linear infinite",margin:"0 auto 20px"}}),(0,a.jsx)("p",{children:"Loading worksheet content..."}),(0,a.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]})}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"white",margin:"0",padding:"32px",fontFamily:"Arial, sans-serif",position:"relative"},children:[A&&(0,a.jsx)("div",{style:{position:"fixed",top:"150px",right:"20px",padding:"10px 15px",backgroundColor:A.includes("Error")?"rgba(231, 76, 60, 0.8)":"#357717",color:"white",borderRadius:"5px",fontWeight:"bold",zIndex:1e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:"fadeIn 0.3s ease-out",fontSize:"16px"},children:A}),(0,a.jsx)("button",{onClick:()=>{window.history.back()},style:{position:"absolute",top:"20px",left:"20px",color:"white",border:"none",borderRadius:"50%",background:v?"#3cb371":"#357717",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"36px",fontWeight:"bold",transform:v?"scale(0.9)":"scale(1)"},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:"\u2190"}),(0,a.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,a.jsx)("img",{src:n,alt:"STEMZ Learning",style:{maxWidth:"300px",display:"block",margin:"0 auto 30px"}}),(0,a.jsx)("h1",{style:{color:"#254E17",fontSize:"48px",marginBottom:"10px",fontFamily:"Orbitron, sans-serif",textAlign:"center"},children:"Animal Behaviors"}),(0,a.jsx)("h2",{style:{color:"#357717",fontSize:"36px",marginBottom:"30px",fontFamily:"Orbitron, sans-serif",textAlign:"center"},children:"Zoology: Lesson 4"}),(0,a.jsxs)("div",{style:{marginBottom:"20px",padding:"10px 15px",borderRadius:"5px",backgroundColor:"#f0f0f0",textAlign:"center",borderLeft:$?"4px solid #3cb371":"4px solid #ccc"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",marginRight:"15px",color:"#333333"},children:"Worksheet:"}),(0,a.jsx)("span",{style:{color:$?"#3cb371":"#666666",fontWeight:$?"bold":"normal"},children:$?"Completed":"Not Completed"}),(0,a.jsxs)("span",{style:{marginLeft:"15px",color:"#555555"},children:["(",B," ",1===B?"point":"points",")"]})]}),(0,a.jsxs)("div",{style:{marginBottom:"30px",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,a.jsx)("h3",{style:{marginTop:0},children:"Instructions:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:["Identify the symbiotic relationship between the animals.",(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:"In each box, select the symbiotic relationship between the animals in each row/column."})})]}),(0,a.jsx)("li",{children:"Click on the animal that is most likely to be a keystone species."})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"30px",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,a.jsx)("h3",{style:{marginTop:0},children:"Helpful Definitions:"}),(0,a.jsx)("h4",{children:"Symbiotic relationships:"}),d.map((e=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,a.jsx)("div",{style:{width:"20px",height:"20px",marginRight:"10px",borderRadius:"4px",backgroundColor:e.color}}),(0,a.jsx)("div",{children:e.label})]},e.value))),(0,a.jsx)("h4",{children:"Keystone species: a species that other species in the ecosystem depend on a lot"})]}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"30px",marginBottom:"30px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"15px",border:"1px solid #ddd",backgroundColor:"#f5f5f5",textAlign:"center"},children:"Safari Ecosystem"}),c.map((e=>(0,a.jsx)("th",{style:{padding:"15px",border:"1px solid #ddd",backgroundColor:"#f5f5f5",textAlign:"center"},children:e},e)))]})}),(0,a.jsx)("tbody",{children:l.map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{padding:"15px",border:"1px solid #ddd",cursor:"pointer",transition:"all 0.3s ease",...h===e?{backgroundColor:"#FFD700",fontWeight:"bold"}:{},...g&&h===e?h===u?{background:"linear-gradient(#e8f5e9, #e8f5e9), #FFD700"}:{background:"linear-gradient(#ffebee, #ffebee), #FFD700"}:{}},onClick:()=>{return s=e,void(g||x(s));var s},children:e}),c.map((o=>{var n;const r=`${e}-${o}`,i=s[r],l=i?null===(n=d.find((e=>e.value===i)))||void 0===n?void 0:n.color:"white";return(0,a.jsx)("td",{style:{padding:"15px",border:"1px solid #ddd",position:"relative",transition:"all 0.3s ease",background:g?`linear-gradient(${m[r]?"#e8f5e9":"#ffebee"}, ${m[r]?"#e8f5e9":"#ffebee"}), ${l}`:l},children:(0,a.jsxs)("select",{style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"transparent"},value:i||"",onChange:s=>((e,s,o)=>{g||t((t=>({...t,[`${e}-${s}`]:o})))})(e,o,s.target.value),disabled:g,children:[(0,a.jsx)("option",{value:"",children:"Select relationship..."}),d.map((e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value)))]})},o)}))]},e)))})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginTop:"30px",marginBottom:"30px"},children:[(0,a.jsx)("button",{onClick:()=>{var e;if(Object.keys(s).length<l.length*c.length||!h){const e={};return l.forEach((t=>{c.forEach((o=>{const n=`${t}-${o}`;s[n]&&(e[n]=z(t,o))}))})),b(e),void f(!0)}const t={};l.forEach((e=>{c.forEach((s=>{t[`${e}-${s}`]=z(e,s)}))})),b(t),f(!0);let o=0;Object.values(t).forEach((e=>{e&&o++})),h===u&&o++;const n=l.length*c.length+1,r=Math.round(o/n*5);T(!0),R(r),(async(e,t,o)=>{try{L("Saving worksheet responses...");const n=[];l.forEach((e=>{c.forEach((t=>{var o,r;const i=`${e}-${t}`,a=s[i],l=p[i];n.push({questionId:`${P}_lesson${O}_relationship_${i}`,questionText:`What is the relationship between ${e} and ${t}?`,selectedAnswer:(null===(o=d.find((e=>e.value===a)))||void 0===o?void 0:o.label)||"No answer selected",selectedValue:a||"No answer selected",correctAnswer:(null===(r=d.find((e=>e.value===l)))||void 0===r?void 0:r.label)||"",correctValue:l,correct:a===l})}))}));const r={questionId:`${P}_lesson${O}_keystone_species`,questionText:"Which animal is most likely to be a keystone species?",selectedAnswer:h||"No answer selected",correctAnswer:u,correct:h===u},a={attemptNumber:1,answers:[...n,r],score:e,total:5,correctCount:t,totalQuestions:o,percentCorrect:Math.round(t/o*100),submittedAt:new Date,relationships:s,keystoneSpecies:h,correctKeystoneSpecies:u};console.log("Saving worksheet response data:",a);const x=await(0,i.E)(a,`studentresponses/${P}/lesson/${O}/worksheet`,"POST");return x&&x.success?(console.log("\u2705 Worksheet responses saved to backend successfully"),L("\u2713 Worksheet responses saved!"),!0):(console.log("\u274c Failed to save worksheet responses to backend"),L("\u274c Error saving worksheet responses"),!1)}catch(n){return console.error("Error saving worksheet responses:",n),L("\u274c Error saving worksheet responses"),!1}})(r,o,n);const a={...k};a.courses||(a.courses={}),a.courses[P]||(a.courses[P]={lessons:{},title:"Zoology"}),a.courses[P].lessons||(a.courses[P].lessons={}),a.courses[P].lessons[O]||(a.courses[P].lessons[O]={activities:{},title:"Animal Behaviors"}),a.courses[P].lessons[O].activities||(a.courses[P].lessons[O].activities={});const x=a.courses[P].lessons[O].activities.worksheet||{},g=Math.max(r,x.earned||0);a.courses[P].lessons[O].activities.worksheet={completed:!0,earned:g,points:5,type:"worksheet",title:"Animal Behaviors"},a.courses[P].lessons[O].lessonPoints=g,null!==(e=a.courses[P].lessons[O].activities.video)&&void 0!==e&&e.completed&&(a.courses[P].lessons[O].completed=!0);let m=0;Object.values(a.courses[P].lessons).forEach((e=>{m+=e.lessonPoints||0})),a.courses[P].coursePoints=m;let v=0;Object.values(a.courses).forEach((e=>{v+=e.coursePoints||0})),a.totalPoints=v,(0,i.E)(a,"points","POST").then((e=>{e&&(w(a),L(`\u2713 Progress saved! You've earned ${r} points!`,3e3))})).catch((e=>{console.error("Update error:",e),L("\u274c Error saving progress",3e3)}))},style:{padding:"12px 25px",fontSize:"16px",color:"white",border:"none",borderRadius:"5px",cursor:g?"default":"pointer",transition:"all 0.3s ease",backgroundColor:g?"#cccccc":"#3cb371"},disabled:g,children:"Check Answers"}),(0,a.jsx)("button",{onClick:()=>{t({}),x(null),f(!1),b({})},style:{padding:"12px 25px",fontSize:"16px",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#CF3434"},children:"Reset"})]}),g&&(0,a.jsxs)("div",{style:{marginTop:"30px",textAlign:"center",padding:"15px",backgroundColor:Object.values(m).every(Boolean)&&h===u?"#e8f5e9":"#ffebee",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",marginBottom:"30px"},children:[(0,a.jsx)("p",{style:{color:Object.values(m).every(Boolean)&&h===u?"#3cb371":"#CF3434",fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},children:Object.keys(s).length?Object.keys(s).length<l.length*c.length?"Please fill in all relationships and keystone species.":h?Object.values(m).every(Boolean)&&h===u?"Congratulations! All answers are correct!":"Some answers are incorrect. Review the highlighted answers.":"Please select a keystone species before checking.":"Please fill in all relationships and keystone species."}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",marginTop:"15px"},children:[(0,a.jsxs)("div",{style:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"#f5f5f5",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"28px",fontWeight:"bold",color:"#357717",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[(()=>{if(!g)return 0;if(0===Object.keys(m).length)return 0;const e=l.length*c.length+1;let s=0;return Object.values(m).forEach((e=>{e&&s++})),h===u&&s++,Math.round(s/e*100)})(),"%"]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"5px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Your Score:"})," ",B," out of 5 points"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#e8f5e9",marginRight:"5px",borderRadius:"2px"}}),"Correct answers"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#ff90ee",marginRight:"5px",borderRadius:"2px"}}),"Incorrect answers"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:"#FFD700",marginRight:"5px",borderRadius:"2px"}}),"Selected keystone species"]})]})]})]})]}),(0,a.jsx)("style",{jsx:!0,children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes fadeOut {\n          from {\n            opacity: 1;\n            transform: translateY(0);\n          }\n          to {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n        }\n      "})]})}},3153:(e,s,t)=>{e.exports=t.p+"static/media/logo.c9017c166767dbbf195a.png"}}]);
//# sourceMappingURL=9620.254fb099.chunk.js.map