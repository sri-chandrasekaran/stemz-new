"use strict";(self.webpackChunkstemz_new=self.webpackChunkstemz_new||[]).push([[2014],{2768:(e,t,o)=>{o.d(t,{E:()=>n});var s=o(3658);const r=(e,t)=>{var o,s,r,n,i;if(401===e.status||403===e.status||(null===t||void 0===t||null===(o=t.message)||void 0===o?void 0:o.toLowerCase().includes("token"))||(null===t||void 0===t||null===(s=t.message)||void 0===s?void 0:s.toLowerCase().includes("unauthorized"))||(null===t||void 0===t||null===(r=t.message)||void 0===r?void 0:r.toLowerCase().includes("expired"))||(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.toLowerCase().includes("token"))||(null===t||void 0===t||null===(i=t.error)||void 0===i?void 0:i.toLowerCase().includes("unauthorized"))){localStorage.removeItem("token");const e=window.location.pathname,t=encodeURIComponent(e),o=encodeURIComponent("Your session has expired. Please log in again.");return window.location.href=`/login?returnUrl=${t}&message=${o}`,!0}return!1};function n(e,t,o){const n=(0,s.KB)(t),i=localStorage.getItem("token"),a={"Content-Type":"application/json"};i&&(a.Authorization=`Bearer ${i}`);const l={method:o,headers:a};return["POST","PUT","PATCH","DELETE"].includes(o)&&e&&(l.body=JSON.stringify(e)),fetch(n,l).then((async e=>{let t;try{t=await e.json()}catch(o){t={message:e.statusText||"Unknown error",status:e.status}}if(r(e,t)){const o=new Error("Token expired - redirecting to login");throw o.response={status:e.status,statusText:e.statusText,data:t},o}if(!e.ok){const o=new Error(`HTTP ${e.status}: ${e.statusText}`);throw o.response={status:e.status,statusText:e.statusText,data:t},o}return t}))}},3658:(e,t,o)=>{o.d(t,{KB:()=>r});const s="https://core-server-nine.vercel.app/api".replace(/\/+$/,""),r=function(){const e=String((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"").replace(/^\/+/,"");return`${s}/${e}`}},2014:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var s=o(5043),r=o(3153),n=o(3216),i=o(2768),a=o(579);const l=[{id:"zoology",term:"Zoology"},{id:"taxonomy",term:"Taxonomy"},{id:"binomial",term:"Binomial Naming System"},{id:"herbivore",term:"Herbivore"},{id:"vertebrate",term:"Vertebrate"},{id:"tetrapod",term:"Tetrapod"},{id:"reptiles",term:"Reptiles"},{id:"fungi",term:"Fungi"}],c=[{id:"def1",text:"Animal that has 4 legs or descended from a 4-legged ancestor."},{id:"def2",text:"The scientific study of naming and classifying groups of living organisms based on their characteristics."},{id:"def3",text:"Animals that eat plants and vegetation."},{id:"def4",text:"Vertebrate animals that have scales and lay their eggs on land."},{id:"def5",text:"Animals with a spinal cord."},{id:"def6",text:"Feeding on organic matter; not animals, plants, or bacteria."},{id:"def7",text:"A system zoologists use to name species."},{id:"def8",text:"The scientific study of the classification, structure, distribution, behavior, and physiology of animals."}],d={zoology:"def8",taxonomy:"def2",binomial:"def7",herbivore:"def3",vertebrate:"def5",tetrapod:"def1",reptiles:"def4",fungi:"def6"},u=["#FFCB6B","#CCBADA","#45B7D1","#FFA07A","#98D8C8","#AFAFFF","#AFBF29","#CD2233"];function p(){const e=(0,n.Zp)(),[t,o]=(0,s.useState)(null),[p,f]=(0,s.useState)({}),[g,h]=(0,s.useState)(!1),[x,m]=(0,s.useState)({}),[b,y]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),[k,C]=(0,s.useState)(!0),[j,S]=(0,s.useState)(!1),[T,E]=(0,s.useState)(!1),[R,A]=(0,s.useState)(0),[z,F]=(0,s.useState)(!1),[O,B]=(0,s.useState)(""),P="lesson1",I="zoology",L=(0,s.useRef)(null),$=(0,s.useRef)(null),W=(0,s.useRef)({}),M=(0,s.useRef)({}),Z=(0,s.useRef)(null),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;B(e),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((()=>B("")),t)};(0,s.useEffect)((()=>{(async()=>{if(localStorage.getItem("token"))try{const t=await(0,i.E)(null,"auth/verify","POST");t&&t.success?(S(!0),C(!1)):(localStorage.removeItem("token"),e("/login"))}catch(t){console.error("Token verification error:",t),localStorage.removeItem("token"),e("/login")}else e("/login")})()}),[e]),(0,s.useEffect)((()=>{if(!j)return;(async()=>{try{const e=await(0,i.E)(null,"points","GET");if(e){if(w(e),e.courses&&e.courses[I]){const t=e.courses[I].lessons[P];if(t&&t.activities&&t.activities.worksheet){const e=t.activities.worksheet.completed||!1,o=t.activities.worksheet.earned||0;E(e),A(o)}}C(!1)}}catch(e){console.error("Error fetching course progress:",e),C(!1)}})()}),[j,I,P]);const _=e=>{var t;return null===(t=Object.entries(p).find((t=>{let[o,s]=t;return s===e})))||void 0===t?void 0:t[0]},H=()=>Object.keys(p).length===l.length&&Object.keys(p).every((e=>d[e]===p[e])),U=e=>{t&&p[t]!==e&&((e=>Object.values(p).some((t=>t===e)))(e)&&_(e)!==t||f((o=>({...o,[t]:e}))))},Y=()=>{if(!L.current||!$.current)return;const e=L.current,t=$.current,o=e.getContext("2d");o&&(e.width=t.offsetWidth,e.height=t.offsetHeight,o.clearRect(0,0,e.width,e.height),Object.entries(p).forEach((e=>{let[s,r]=e;const n=W.current[s],i=M.current[r];if(n&&i){const e=n.getBoundingClientRect(),r=i.getBoundingClientRect(),a=t.getBoundingClientRect(),c=e.right-a.left,d=e.top+e.height/2-a.top,p=r.left-a.left,f=r.top+r.height/2-a.top;o.beginPath(),o.moveTo(c,d),o.lineTo(p,f),o.strokeStyle=u[l.findIndex((e=>e.id===s))],o.lineWidth=2,o.stroke()}})))};(0,s.useEffect)((()=>(window.addEventListener("resize",(()=>{L.current&&$.current&&Y()})),()=>window.removeEventListener("resize",Y))),[]),(0,s.useEffect)((()=>{const e=setTimeout((()=>Y()),200);return()=>clearTimeout(e)}),[p,g]);const N=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(g){if(o){const t=Object.keys(p).find((t=>p[t]===e));return t&&d[t]===e?{backgroundColor:"#3cb371",color:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}:{backgroundColor:"#CF3434",color:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}return p[e]===d[e]?{backgroundColor:"#3cb371",color:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}:{backgroundColor:"#CF3434",color:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}if(o){const o=_(e);if(o){const e=o===t;return{backgroundColor:u[l.findIndex((e=>e.id===o))],color:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",cursor:e?"pointer":"not-allowed",opacity:e?"1":"0.9"}}return{backgroundColor:"#f0f0f0",color:"#333333",border:"1px solid #cccccc",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",cursor:"pointer"}}return x[e]?{backgroundColor:u[l.findIndex((t=>t.id===e))],color:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",border:"2px solid #333333"}:{backgroundColor:"#f0f0f0",color:"#333333",border:"1px solid #cccccc",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"}};return k?(0,a.jsx)("div",{style:{minHeight:"100vh",background:"white",margin:0,padding:"32px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"Arial, sans-serif"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #357717",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 2s linear infinite",margin:"0 auto 20px"}}),(0,a.jsx)("p",{children:"Loading worksheet content..."}),(0,a.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]})}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"white",margin:"0",padding:"32px",fontFamily:"Arial, sans-serif",position:"relative"},children:[O&&(0,a.jsx)("div",{style:{position:"fixed",top:"150px",right:"20px",padding:"10px 15px",backgroundColor:O.includes("Error")?"rgba(231, 76, 60, 0.8)":"#357717",color:"white",borderRadius:"5px",fontWeight:"bold",zIndex:1e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:"fadeIn 0.3s ease-out",fontSize:"16px"},children:O}),(0,a.jsx)("button",{onClick:()=>{window.history.back()},style:{position:"absolute",top:"20px",left:"20px",color:"white",border:"none",borderRadius:"50%",background:b?"#3cb371":"#357717",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",fontSize:"36px",fontWeight:"bold",transform:b?"scale(0.9)":"scale(1)"},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:"\u2190"}),(0,a.jsxs)("div",{style:{maxWidth:"896px",margin:"0 auto"},children:[(0,a.jsx)("img",{src:r,alt:"STEMZ Learning",style:{maxWidth:"300px",display:"block",margin:"0 auto 30px"}}),(0,a.jsx)("h1",{style:{color:"#254E17",fontSize:"48px",marginBottom:"10px",fontFamily:"Orbitron, sans-serif",textAlign:"center"},children:"Categories"}),(0,a.jsx)("h2",{style:{color:"#357717",fontSize:"36px",marginBottom:"30px",fontFamily:"Orbitron, sans-serif",textAlign:"center"},children:"Zoology: Lesson 1"}),(0,a.jsxs)("div",{ref:$,style:{position:"relative",backgroundColor:"#f9f9f9",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"20px"},children:[(0,a.jsxs)("div",{style:{marginBottom:"20px",padding:"10px 15px",borderRadius:"5px",backgroundColor:"#f0f0f0",textAlign:"center",borderLeft:T?"4px solid #3cb371":"4px solid #ccc"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",marginRight:"15px",color:"#333333"},children:"Worksheet:"}),(0,a.jsx)("span",{style:{color:T?"#3cb371":"#666666",fontWeight:T?"bold":"normal"},children:T?"Completed":"Not Completed"}),(0,a.jsxs)("span",{style:{marginLeft:"15px",color:"#555555"},children:["(",R," ",1===R?"point":"points",")"]})]}),(0,a.jsx)("p",{style:{textAlign:"center",color:"#666666",marginBottom:"30px"},children:"Match the term to the correct definition. You will find the definitions as we go through the lesson."}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[(0,a.jsxs)("div",{style:{width:"45%",paddingLeft:"20px"},children:[(0,a.jsx)("h3",{style:{color:"#333333",marginBottom:"15px"},children:"Terms"}),l.map((e=>(0,a.jsx)("div",{ref:t=>W.current[e.id]=t,onClick:()=>{return t=e.id,o(t),void m((e=>({...e,[t]:!0})));var t},style:{padding:"12px 15px",margin:"10px 0",borderRadius:"5px",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"bold",...N(e.id)},children:e.term},e.id)))]}),(0,a.jsxs)("div",{style:{width:"45%"},children:[(0,a.jsx)("h3",{style:{color:"#333333",marginBottom:"15px"},children:"Definitions"}),c.map((e=>(0,a.jsx)("div",{ref:t=>M.current[e.id]=t,onClick:()=>U(e.id),style:{padding:"12px 15px",margin:"10px 0",borderRadius:"5px",cursor:"pointer",transition:"all 0.3s ease",...N(e.id,!0)},children:e.text},e.id)))]})]}),(0,a.jsx)("canvas",{ref:L,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}),(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:"30px"},children:[(0,a.jsx)("button",{onClick:async()=>{if(h(!0),Object.keys(p).length!==l.length)return;let e=0;Object.keys(p).forEach((t=>{d[t]===p[t]&&e++}));const t=l.length,o=Math.round(e/l.length*5);E(!0),A(o);const s=await(async(e,t,o)=>{try{D("Saving worksheet responses...");const s={attemptNumber:1,answers:l.map(((e,t)=>({questionId:`${I}_lesson${P.replace("lesson","")}_worksheet_${e.id}`,userMatch:p[e.id]||"No match selected",correctMatch:d[e.id],correct:p[e.id]===d[e.id]}))),score:e,total:5,correctCount:t,totalQuestions:o,percentCorrect:o>0?t/o*100:0,submittedAt:new Date,worksheetType:"zoology_terminology_matching",componentMatches:p,worksheetTitle:"Zoology Terminology"};console.log("Saving zoology worksheet response data:",s);const r=await(0,i.E)(s,`studentresponses/${I}/lesson/lesson${P.replace("lesson","")}/worksheet`,"POST");return r&&r.success?(console.log("\u2705 Zoology worksheet responses saved to backend successfully"),D("\u2713 Worksheet responses saved!"),!0):(console.log("\u274c Failed to save zoology worksheet responses to backend"),D("\u274c Error saving worksheet responses"),!1)}catch(s){return console.error("Error saving zoology worksheet responses:",s),D("\u274c Error saving worksheet responses"),!1}})(o,e,t);s||D("\u26a0\ufe0f Responses saved locally, but database save failed"),setTimeout((()=>{var e;const t={...v};t.courses||(t.courses={}),t.courses[I]||(t.courses[I]={lessons:{},title:"Zoology"}),t.courses[I].lessons||(t.courses[I].lessons={}),t.courses[I].lessons[P]||(t.courses[I].lessons[P]={activities:{},title:"Categories"}),t.courses[I].lessons[P].activities||(t.courses[I].lessons[P].activities={}),t.courses[I].lessons[P].activities.worksheet={completed:!0,earned:o,points:5,type:"worksheet",title:"Zoology Terminology"},t.courses[I].lessons[P].lessonPoints=o,null!==(e=t.courses[I].lessons[P].activities.video)&&void 0!==e&&e.completed&&(t.courses[I].lessons[P].completed=!0);let s=0;Object.values(t.courses[I].lessons).forEach((e=>{s+=e.lessonPoints||0})),t.courses[I].coursePoints=s;let r=0;Object.values(t.courses).forEach((e=>{r+=e.coursePoints||0})),t.totalPoints=r,(0,i.E)(t,"points","POST").then((e=>{e&&(w(t),D("\u2713 Progress saved!",3e3))})).catch((e=>{console.error("Update error:",e),D("\u274c Error saving progress",3e3)}))}),500)},style:{padding:"12px 25px",fontSize:"16px",backgroundColor:"#3cb371",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginRight:"15px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:"Check Answers"}),(0,a.jsx)("button",{onClick:()=>{if(f({}),h(!1),o(null),m({}),L.current){const e=L.current.getContext("2d");e&&e.clearRect(0,0,L.current.width,L.current.height)}},style:{padding:"12px 25px",fontSize:"16px",backgroundColor:"#CF3434",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:"Reset Quiz"})]}),g&&(0,a.jsx)("div",{style:{marginTop:"30px",textAlign:"center",padding:"15px",backgroundColor:H()?"#e8f5e9":"#ffebee",borderRadius:"5px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:(0,a.jsx)("p",{style:{color:H()?"#3cb371":"#CF3434",fontSize:"18px",fontWeight:"bold"},children:0===Object.keys(p).length?"Please match some terms before checking answers.":H()?"Congratulations! All answers are correct.":Object.keys(p).length<l.length?"Please match all terms before checking answers.":"Some matches are incorrect. Please review and try again."})})]})]}),(0,a.jsx)("style",{jsx:!0,children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes fadeOut {\n          from {\n            opacity: 1;\n            transform: translateY(0);\n          }\n          to {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n        }\n      "})]})}},3153:(e,t,o)=>{e.exports=o.p+"static/media/logo.c9017c166767dbbf195a.png"}}]);
//# sourceMappingURL=2014.7f518345.chunk.js.map