(self.webpackChunkstemz_new=self.webpackChunkstemz_new||[]).push([[2168],{2768:e=>{e.exports={call_api:function(e,s,t){const o="https://core-server-nine.vercel.app/api/"+s,i=localStorage.getItem("token"),n={"Content-Type":"application/json"};i&&(n.Authorization=`Bearer ${i}`);const r={method:t,headers:n};return["POST","PUT","PATCH","DELETE"].includes(t)&&e&&(r.body=JSON.stringify(e)),fetch(o,r).then((async e=>{let s;try{s=await e.json()}catch(t){s={message:e.statusText||"Unknown error",status:e.status}}if(((e,s)=>{var t,o,i,n,r;if(401===e.status||403===e.status||(null===s||void 0===s||null===(t=s.message)||void 0===t?void 0:t.toLowerCase().includes("token"))||(null===s||void 0===s||null===(o=s.message)||void 0===o?void 0:o.toLowerCase().includes("unauthorized"))||(null===s||void 0===s||null===(i=s.message)||void 0===i?void 0:i.toLowerCase().includes("expired"))||(null===s||void 0===s||null===(n=s.error)||void 0===n?void 0:n.toLowerCase().includes("token"))||(null===s||void 0===s||null===(r=s.error)||void 0===r?void 0:r.toLowerCase().includes("unauthorized"))){localStorage.removeItem("token");const e=window.location.pathname,s=encodeURIComponent(e),t=encodeURIComponent("Your session has expired. Please log in again.");return window.location.href=`/login?returnUrl=${s}&message=${t}`,!0}return!1})(e,s)){const t=new Error("Token expired - redirecting to login");throw t.response={status:e.status,statusText:e.statusText,data:s},t}if(!e.ok){const t=new Error(`HTTP ${e.status}: ${e.statusText}`);throw t.response={status:e.status,statusText:e.statusText,data:s},t}return s}))}}},1802:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});t(5043);var o=t(2774),i=t(579);const n=()=>(0,i.jsx)("div",{className:"footer fixed-footer",children:(0,i.jsx)("div",{className:"footer-container",children:(0,i.jsxs)("div",{className:"social",children:[(0,i.jsx)("a",{href:"https://www.facebook.com/alice.gao.96558/",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(o.iYk,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,i.jsx)("a",{href:"https://www.linkedin.com/company/stemz-learning/",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(o.QEs,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,i.jsx)("a",{href:"https://www.tiktok.com/@stemzlearning?_t=8edHU0jxuuUI&_r=1",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(o.kkU,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,i.jsx)("a",{href:"https://www.instagram.com/stemzlearning",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(o.ao$,{size:40,style:{color:"black",marginRight:"1rem"}})}),(0,i.jsx)("a",{href:"https://www.twitter.com/stemzlearning",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(o.feZ,{size:40,style:{color:"black",marginRight:"1rem"}})})]})})})},7956:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});t(5043);var o=t(579);const i=e=>{let{overlayText:s}=e;return(0,o.jsx)("div",{className:"hero-other",children:(0,o.jsx)("div",{className:"hero-overlay",children:(0,o.jsx)("p",{className:"overlay-text",children:s})})})}},8468:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var o=t(5043),i=t(2774),n=t(3216),r=t(5475),l=t(3153),a=t(6213),c=t(579);const d=()=>{const[e,s]=(0,o.useState)(null),[t,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[v,p]=(0,o.useState)(null),m=(0,n.Zp)();window.addEventListener("scroll",(()=>{window.scrollY>=45?h(!0):h(!1)}));const g=()=>{window.scrollTo(0,0),d(!1)},x=e=>{window.innerWidth<=1100&&p(v===e?null:e)};return(0,o.useEffect)((()=>{localStorage.getItem("token")?s(!0):a.A.get("https://www.stemzlearning.org/dashboard",{withCredentials:!0}).then((e=>{e.data.success?s(!0):s(!1)})).catch((()=>{s(!1)}))}),[]),null===e?null:(0,c.jsxs)("div",{className:u?"header header-bg":"header",children:[(0,c.jsx)(r.N_,{to:"/",children:(0,c.jsx)("img",{src:l,alt:"STEMz Learning",className:"logo"})}),(0,c.jsxs)("ul",{className:t?"nav-menu active":"nav-menu",children:[(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/",onClick:g,children:"Home"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/about-us",onClick:g,children:"About Us"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/online-classes",onClick:()=>{window.location.href="/online-classes",d(!1)},children:"Online Classes"})}),(0,c.jsxs)("li",{className:0===v?"active":"",onClick:()=>x(0),children:[(0,c.jsx)(r.N_,{to:"/self-paced-classes",onClick:e=>window.innerWidth<=1100&&e.preventDefault(),children:"Self-Paced Classes"}),(0,c.jsxs)("ul",{className:"dropdown-menu",children:[(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/astronomy",onClick:g,children:"Astronomy"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/basicsofcoding",onClick:g,children:"Basics of Coding"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/biochemistry",onClick:g,children:"Biochemistry"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/chemistry",onClick:g,children:"Chemistry"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/circuits",onClick:g,children:"Circuits"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/environmentalscience",onClick:g,children:"Environmental Science"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/psychology",onClick:g,children:"Psychology"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/statistics",onClick:g,children:"Statistics"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/zoology",onClick:g,children:"Zoology"})})]})]}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/course-boxes",onClick:g,children:"Course Boxes"})}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"https://substack.com/@STEMZLEARNING",onClick:g,children:"News"})}),(0,c.jsxs)("li",{className:1===v?"active":"",onClick:()=>x(1),children:[(0,c.jsx)(r.N_,{to:"/get-involved",onClick:e=>window.innerWidth<=1100&&e.preventDefault(),children:"Get Involved"}),(0,c.jsx)("ul",{className:"dropdown-menu",children:(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/volunteer",onClick:g,children:"Volunteers"})})})]}),(0,c.jsx)("li",{children:(0,c.jsx)(r.N_,{to:"/contact",onClick:g,children:"Contact"})}),(0,c.jsx)("li",{className:"login-item",children:e?(0,c.jsx)(r.N_,{to:"/dashboard",onClick:e=>{e.preventDefault(),m("/dashboard"),d(!1)},className:"login-link",children:"Dashboard"}):(0,c.jsx)(r.N_,{to:"/login",onClick:g,className:"login-link",children:"Log In"})})]}),(0,c.jsx)("div",{className:"hamburger",onClick:()=>d((e=>!e)),children:t?(0,c.jsx)(i.QCr,{size:20,style:{color:"black"}}):(0,c.jsx)(i.OXb,{size:20,style:{color:"black"}})})]})}},2168:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var o=t(5043),i=t(8468),n=t(7956),r=t(1802),l=t(3216),a=t(5475),c=t(2768),d=t(579);const u=e=>{let{lessonTitle:s,lessonNumber:t="lesson1",courseKey:u="astronomy",videoUrl:h,slideshowUrl:v,worksheetPath:p=null,quizPath:m=null,notesUrl:g,notesLabel:x,maxVideoPoints:w=7,worksheetPoints:f=5,quizPoints:j=10,completionThreshold:k=95,isParentVersion:y=!1}=e;const[N,b]=(0,o.useState)(null),[C,T]=(0,o.useState)(!0),[z,S]=(0,o.useState)(!1),[_,P]=(0,o.useState)(0),[E,I]=(0,o.useState)(!1),[$,A]=(0,o.useState)(!1),[L,q]=(0,o.useState)({video:0,worksheet:0,quiz:0}),[Y,R]=(0,o.useState)(!1),[U,D]=(0,o.useState)(""),O=(0,o.useRef)(null),B=(0,o.useRef)(null),W=(0,o.useRef)(null),F=(0,l.Zp)(),M=null!==p,G=null!==m,Q=e=>{const s=(new Date).toLocaleTimeString();console.log(`[${s}] ${e}`)},V=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;D(e),W.current&&clearTimeout(W.current),W.current=setTimeout((()=>{D("")}),s)};(0,o.useEffect)((()=>{(async()=>{if(!localStorage.getItem("token"))return Q("No token found, redirecting to login page"),void F("/login");try{Q("Token found, verifying...");const e=await(0,c.call_api)(null,"auth/verify","POST");e&&e.success?(Q("Token verification successful"),S(!0),T(!1)):(Q("Token verification failed"),localStorage.removeItem("token"),F("/login"))}catch(e){console.error("Token verification error:",e),localStorage.removeItem("token"),F("/login")}})()}),[F]),(0,o.useEffect)((()=>{if(!z)return;(async()=>{try{Q("Fetching user progress...");const e=await(0,c.call_api)(null,"points","GET");if(Q("API response received"),e){if(b(e),e.courses&&e.courses[u]){const s=e.courses[u].lessons[t];if(Q("Lesson data found"),s){if(s.activities&&s.activities.video){const e=s.activities.video.percentWatched||0,t=s.activities.video.earned||0;Q(`Loading saved video progress: ${e}%`),Q(`Loading saved video points: ${t}`),P(e),q((e=>({...e,video:t})))}if(M&&s.activities&&s.activities.worksheet){const e=s.activities.worksheet.completed||!1,t=s.activities.worksheet.earned||0;Q(`Loading saved worksheet completion: ${e}`),Q(`Loading saved worksheet points: ${t}`),I(e),q((e=>({...e,worksheet:t})))}if(G&&s.activities&&s.activities.quiz){const e=s.activities.quiz.completed||!1,t=s.activities.quiz.earned||0;Q(`Loading saved quiz completion: ${e}`),Q(`Loading saved quiz points: ${t}`),A(e),q((e=>({...e,quiz:t})))}}}T(!1)}}catch(e){console.error("Error fetching course progress:",e),T(!1)}})()}),[z,u,t,M,G]),(0,o.useEffect)((()=>{const e=()=>{Q("Initializing YouTube player");if(!document.getElementById("youtube-player"))return Q("YouTube iframe not found, will retry"),void setTimeout(e,1e3);try{O.current=new YT.Player("youtube-player",{events:{onReady:s,onStateChange:t}}),Q("Player initialized")}catch(o){Q("Error initializing player: "+o.message)}},s=e=>{Q("Player ready"),O.current=e.target},t=e=>{const s={"-1":"UNSTARTED",0:"ENDED",1:"PLAYING",2:"PAUSED",3:"BUFFERING",5:"CUED"}[e.data]||e.data;Q(`Player state changed: ${s} (${e.data})`),1===e.data?Z():2!==e.data&&0!==e.data||(J(),H())};return window.YT&&window.YT.Player?(Q("YouTube API already loaded"),e()):(()=>{Q("Loading YouTube API");const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(s,t),window.onYouTubeIframeAPIReady=e})(),()=>{Q("Component unmounting, cleaning up"),H(),window.onYouTubeIframeAPIReady=null,W.current&&clearTimeout(W.current)}}),[]);const Z=()=>{Q("Starting progress tracking"),B.current&&clearInterval(B.current),B.current=setInterval(J,5e3)},H=()=>{B.current&&(clearInterval(B.current),B.current=null,Q("Stopped progress tracking"))},J=()=>{if(O.current)try{if("function"!==typeof O.current.getCurrentTime||"function"!==typeof O.current.getDuration)return Q("Player methods not available"),void(window.YT&&window.YT.Player&&(Q("Recreating player instance"),O.current=new YT.Player("youtube-player",{events:{onReady:e=>{Q("Player recreated"),O.current=e.target,setTimeout(J,500)}}})));const e=O.current.getCurrentTime(),s=O.current.getDuration();if(isNaN(e)||isNaN(s)||s<=0)return void Q("Invalid time values");const t=Math.min(Math.floor(e/s*100),100);if(Q(`Current video position: ${t}% (${e.toFixed(1)}/${s.toFixed(1)})`),t>_){Q(`Updating progress: ${_}% \u2192 ${t}%`),P(t);const e=Math.min(w,Math.floor(w*t/100));Q(`Updating points: ${L.video} \u2192 ${e}`),q((s=>({...s,video:e}))),t>=k&&(Q(`Video fully watched (${t}% \u2265 ${k}%)`),P(100),q((e=>({...e,video:w}))))}else Q(`Current position (${t}%) is less than max progress (${_}%). No update needed.`)}catch(e){Q("Error checking progress: "+e.message)}else Q("No player available")};if((0,o.useEffect)((()=>{(async()=>{var e,s,o,i,n,r,l,a,d,h,v,p,m,g,x;if(!N||!z||Y)return;const w=null===(e=N.courses)||void 0===e||null===(s=e[u])||void 0===s||null===(o=s.lessons)||void 0===o?void 0:o[t];if(!w)return;const f=L.video!==((null===(i=w.activities)||void 0===i||null===(n=i.video)||void 0===n?void 0:n.earned)||0),j=_!==((null===(r=w.activities)||void 0===r||null===(l=r.video)||void 0===l?void 0:l.percentWatched)||0),y=!!M&&L.worksheet!==((null===(a=w.activities)||void 0===a||null===(d=a.worksheet)||void 0===d?void 0:d.earned)||0),C=!!M&&E!==((null===(h=w.activities)||void 0===h||null===(v=h.worksheet)||void 0===v?void 0:v.completed)||!1),T=!!G&&L.quiz!==((null===(p=w.activities)||void 0===p||null===(m=p.quiz)||void 0===m?void 0:m.earned)||0),S=!!G&&$!==((null===(g=w.activities)||void 0===g||null===(x=g.quiz)||void 0===x?void 0:x.completed)||!1),P=f||y||T||j||C||S;if(Q("Changes detected: "+P),P){Q("Updating backend with changes"),R(!0),V("Saving progress...");try{const e=JSON.parse(JSON.stringify(N));e.courses[u]||(e.courses[u]={lessons:{}}),e.courses[u].lessons[t]||(e.courses[u].lessons[t]={activities:{}}),e.courses[u].lessons[t].activities||(e.courses[u].lessons[t].activities={}),e.courses[u].lessons[t].activities.video||(e.courses[u].lessons[t].activities.video={}),M&&!e.courses[u].lessons[t].activities.worksheet&&(e.courses[u].lessons[t].activities.worksheet={}),G&&!e.courses[u].lessons[t].activities.quiz&&(e.courses[u].lessons[t].activities.quiz={}),e.courses[u].lessons[t].activities.video.percentWatched=_,e.courses[u].lessons[t].activities.video.earned=L.video,e.courses[u].lessons[t].activities.video.completed=_>=k,M&&(e.courses[u].lessons[t].activities.worksheet.completed=E,e.courses[u].lessons[t].activities.worksheet.earned=L.worksheet),G&&(e.courses[u].lessons[t].activities.quiz.completed=$,e.courses[u].lessons[t].activities.quiz.earned=L.quiz);const s=L.video+(M?L.worksheet:0)+(G?L.quiz:0);e.courses[u].lessons[t].lessonPoints=s;const o=_>=k&&(!M||E)&&(!G||$);e.courses[u].lessons[t].completed=o;let i=0;Object.values(e.courses[u].lessons).forEach((e=>{i+=e.lessonPoints||0})),e.courses[u].coursePoints=i;const n=Object.values(e.courses[u].lessons).every((e=>e.completed));e.courses[u].completed=n;let r=0;Object.values(e.courses).forEach((e=>{r+=e.coursePoints||0})),e.totalPoints=r,Q("Sending updated progress to backend");await(0,c.call_api)(e,"points","POST")&&(Q("Points updated successfully"),b(e),V("\u2713 Progress saved!",3e3))}catch(I){console.error("Error updating points:",I),V("\u274c Error saving progress",3e3)}finally{R(!1)}}})()}),[L,_,E,$,N,z,Y,u,t,M,G,k]),(0,o.useEffect)((()=>()=>{W.current&&clearTimeout(W.current)}),[]),C)return(0,d.jsxs)("div",{children:[(0,d.jsx)(i.A,{}),(0,d.jsx)(n.A,{overlayText:s}),(0,d.jsxs)("div",{className:"loading-container",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:"Loading lesson content..."})]}),(0,d.jsx)(r.A,{})]});const K=`https://www.youtube.com/embed/${(e=>{if(!e.includes("youtube.com/")&&!e.includes("youtu.be/"))return e;const s=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return s&&11===s[2].length?s[2]:null})(h)}?enablejsapi=1&origin=${window.location.origin}`,X=w+(M?f:0)+(G?j:0);return(0,d.jsxs)("div",{children:[(0,d.jsx)(i.A,{}),(0,d.jsx)(n.A,{overlayText:s}),U&&(0,d.jsx)("div",{className:"status-notification",style:{position:"fixed",top:"150px",right:"20px",padding:"10px 15px",backgroundColor:U.includes("Error")?"rgba(231, 76, 60, 0.8)":"#357717",color:"white",borderRadius:"5px",fontWeight:"bold",zIndex:1e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:"fadeIn 0.3s ease-out",fontSize:"16px"},children:U}),(0,d.jsxs)("div",{className:"points-status",children:[(0,d.jsxs)("div",{className:"points-row",children:[(0,d.jsx)("span",{className:"points-label",children:"Video progress:"}),(0,d.jsxs)("span",{className:"points-value",children:[_,"%"]}),(0,d.jsxs)("span",{className:"points-earned",children:["(",L.video," points)"]})]}),M&&(0,d.jsxs)("div",{className:"points-row",children:[(0,d.jsx)("span",{className:"points-label",children:"Worksheet:"}),(0,d.jsx)("span",{className:"points-value",children:E?"Completed":"Not completed"}),(0,d.jsxs)("span",{className:"points-earned",children:["(",L.worksheet," points)"]})]}),G&&(0,d.jsxs)("div",{className:"points-row",children:[(0,d.jsx)("span",{className:"points-label",children:"Quiz:"}),(0,d.jsx)("span",{className:"points-value",children:$?"Completed":"Not completed"}),(0,d.jsxs)("span",{className:"points-earned",children:["(",L.quiz," points)"]})]}),(0,d.jsxs)("div",{className:"points-row total",children:[(0,d.jsx)("span",{className:"points-label",children:"Total lesson points:"}),(0,d.jsxs)("span",{className:"points-value",children:[L.video+(M?L.worksheet:0)+(G?L.quiz:0)," out of ",X]})]})]}),(0,d.jsx)("div",{className:"vidbig",children:(0,d.jsx)("div",{id:"youtube-player-container",children:(0,d.jsx)("iframe",{id:"youtube-player",className:"astrovid",width:"700",height:"480",src:K,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),(0,d.jsxs)("div",{className:"centered-container",children:[v&&(0,d.jsx)(a.N_,{to:v,target:"_blank",rel:"noopener noreferrer",children:(0,d.jsx)("button",{className:"course-button",children:"Slideshow"})}),M&&(0,d.jsx)("button",{className:"course-button",onClick:()=>{Q("Worksheet button clicked, navigating to worksheet"),F(p)},children:"Worksheet"}),G&&(0,d.jsx)("button",{className:"course-button",onClick:()=>{Q("Quiz button clicked, navigating to quiz"),F(m)},children:"Quiz"}),g&&(0,d.jsx)(a.N_,{to:g,target:"_blank",rel:"noopener noreferrer",children:(0,d.jsx)("button",{className:"course-button",children:x})})]}),(0,d.jsx)("style",{jsx:!0,children:"\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(-10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        \n        @keyframes fadeOut {\n          from { opacity: 1; transform: translateY(0); }\n          to { opacity: 0; transform: translateY(-10px); }\n        }\n      "}),(0,d.jsx)("div",{style:{paddingBottom:"200px"}}),(0,d.jsx)(r.A,{})]})}},3153:(e,s,t)=>{"use strict";e.exports=t.p+"static/media/logo.c9017c166767dbbf195a.png"}}]);
//# sourceMappingURL=2168.5c3c133b.chunk.js.map