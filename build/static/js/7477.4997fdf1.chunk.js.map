{"version":3,"file":"static/js/7477.4997fdf1.chunk.js","mappings":"+KAIA,MA0FA,EA1FgBA,KACd,MAAOC,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,KAC1CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GAEjCG,EAAY,aA6DlB,OAzDAC,EAAAA,EAAAA,YAAU,KACUC,WAChB,IAEEC,QAAQC,IAAI,8CACZ,MAAMC,QAAqBC,EAAAA,EAAAA,GAAS,KAAM,cAAe,QAGzD,GAFAH,QAAQC,IAAI,wBAAyBC,IAEhCA,IAAiBA,EAAaE,KAEjC,YADAJ,QAAQK,MAAM,2BAIhBL,QAAQC,IAAI,wCAAyCC,EAAaE,KAAKE,IAEvE,MAAMC,QAA4BJ,EAAAA,EAAAA,GAAS,KAAM,YAAYD,EAAaE,KAAKE,KAAM,OAGrF,GAFAN,QAAQC,IAAI,yBAA0BM,IAEjCA,EAEH,YADAP,QAAQK,MAAM,gCAIhB,IAAKE,EAAoBC,WAEvB,YADAR,QAAQK,MAAM,wCAAyCE,GAIzD,MAAME,EAAYF,EAAoBC,WACtCR,QAAQC,IAAI,6BAA6BQ,KAGzCT,QAAQC,IAAI,8CAA8CJ,wBAA2CY,KACrG,MAAMC,QAAiBP,EAAAA,EAAAA,GAAS,KAAM,0BAA0BN,uBAA0CY,IAAa,OAGvH,GAFAT,QAAQC,IAAI,oBAAqBS,GAE7BA,GAAYA,EAASC,UAAW,CAElC,MAAMC,EAAYF,EAASC,UAAUE,KAAKC,IAAC,CACzCC,KAAMD,EAAEE,aACRC,KAAMH,EAAEI,gBAEVzB,EAAgBmB,GAChBZ,QAAQC,IAAI,UAAUW,EAAUO,kCAAkCV,IACpE,MACET,QAAQC,IAAI,8CAEhB,CAAE,MAAOI,GACPL,QAAQK,MAAM,uBAAwBA,EACxC,CAAC,QACCT,GAAW,EACb,GAGFwB,EAAW,GACV,CAACvB,EAzDc,MA2DdF,GAAgB0B,EAAAA,EAAAA,KAAA,OAAAC,SAAK,6BAEvBD,EAAAA,EAAAA,KAACE,EAAAA,EAAe,CACdC,YAAY,2CACZC,aAAa,UACb5B,UAAU,aACV6B,SAAS,cAETC,aAAa,0KACbC,cAAc,mBACdC,SAAU,KAEVC,SAAS,kIACTC,WAAW,gBAEXC,eAAgB,EAChBC,gBAAiB,EACjBC,oBAAqB,GAErBC,iBAAiB,EACjB3C,aAAcA,GACd,C","sources":["pages/psychology/Psych1s.js"],"sourcesContent":["import React,{ useEffect, useState }  from \"react\";\nimport VideoLessonPage from \"../../components/VideoLessonPage\";\nimport { call_api } from '../../api';\n\nconst Psych1s = () => {\n  const [bpqQuestions, setBpqQuestions] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const courseKey = \"psychology\";\n  const lessonNumber = \"lesson1\";\n  const lesson_id = \"1\";\n\n  useEffect(() => {\n    const fetchBPQs = async () => {\n      try {\n        // Step 1: Get the current user's grade (same as Quiz component)\n        console.log(\"Step 1: Getting user info from auth/verify\");\n        const userResponse = await call_api(null, \"auth/verify\", \"POST\");\n        console.log(\"Auth verify response:\", userResponse);\n        \n        if (!userResponse || !userResponse.user) {\n          console.error(\"Could not get user info\");\n          return;\n        }\n\n        console.log(\"Step 2: Getting user details with ID:\", userResponse.user.id);\n        // Get the full user details to access grade\n        const userDetailsResponse = await call_api(null, `users/id/${userResponse.user.id}`, \"GET\");\n        console.log(\"User details response:\", userDetailsResponse);\n        \n        if (!userDetailsResponse) {\n          console.error(\"Could not fetch user details\");\n          return;\n        }\n        \n        if (!userDetailsResponse.gradeLevel) {\n          console.error(\"User has no grade field. User object:\", userDetailsResponse);\n          return;\n        }\n\n        const userGrade = userDetailsResponse.gradeLevel;\n        console.log(`Step 3: User grade found: ${userGrade}`);\n\n        // Step 4: Now fetch BPQ questions with the user's actual grade\n        console.log(`Step 4: Fetching BPQ questions for course: ${courseKey}, lesson: ${lesson_id}, grade: ${userGrade}`);\n        const response = await call_api(null, `bpqquestions?course_id=${courseKey}&lesson_id=${lesson_id}&grade=${userGrade}`, \"GET\");\n        console.log(\"BPQ API response:\", response);\n        \n        if (response && response.questions) {\n          // Convert backend fields to expected frontend shape\n          const formatted = response.questions.map((q) => ({\n            text: q.questionText,\n            time: q.timeInVideo,\n          }));\n          setBpqQuestions(formatted);\n          console.log(`Loaded ${formatted.length} BPQ questions for grade ${userGrade}`);\n        } else {\n          console.log(\"No BPQ questions found for this grade level\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching BPQs:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBPQs();\n  }, [courseKey, lesson_id]);\n\n  if (loading) return <div>Loading video lesson...</div>;\n  return (\n    <VideoLessonPage\n      lessonTitle=\"Lesson 1: Psychology & Scientific Method\"\n      lessonNumber=\"lesson1\"\n      courseKey=\"psychology\"\n      videoUrl=\"TjGatGI4CJM\"\n      // Resource URLs and paths\n      slideshowUrl=\"https://docs.google.com/presentation/d/e/2PACX-1vQ-vjBlKAWDEa513c85FwKAIrMDkjeRvfFRmmWS3MAhYy1m8Mm2cPuEMFqybbKqiKzROBfLvLGwXeM0/pub?start=false&loop=false&delayms=3000\"\n      worksheetPath=\"/psychworksheet1\"\n      quizPath={null}\n      // Notes configuration\n      notesUrl=\"https://docs.google.com/document/d/e/2PACX-1vSlH65JZnS6yB3lL8zWNOQt3XE3mhX16FE3Nk-XLKZlMOg_lutgQ6fJK_AIr_zUNFKMVyTKhdgrx4HG/pub\"\n      notesLabel=\"Student Notes\"\n      // Points configuration\n      maxVideoPoints={7}\n      worksheetPoints={5}\n      completionThreshold={95}\n      // Version type\n      isParentVersion={false}\n      bpqQuestions={bpqQuestions}\n    />\n  );\n};\n\nexport default Psych1s;\n"],"names":["Psych1s","bpqQuestions","setBpqQuestions","useState","loading","setLoading","courseKey","useEffect","async","console","log","userResponse","call_api","user","error","id","userDetailsResponse","gradeLevel","userGrade","response","questions","formatted","map","q","text","questionText","time","timeInVideo","length","fetchBPQs","_jsx","children","VideoLessonPage","lessonTitle","lessonNumber","videoUrl","slideshowUrl","worksheetPath","quizPath","notesUrl","notesLabel","maxVideoPoints","worksheetPoints","completionThreshold","isParentVersion"],"sourceRoot":""}