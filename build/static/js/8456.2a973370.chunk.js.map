{"version":3,"file":"static/js/8456.2a973370.chunk.js","mappings":"+KAIA,MA4FA,EA5FmBA,KACjB,MAAOC,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,KAC1CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GAEjCG,EAAY,YA6DlB,OAzDAC,EAAAA,EAAAA,YAAU,KACUC,WAChB,IAEEC,QAAQC,IAAI,8CACZ,MAAMC,QAAqBC,EAAAA,EAAAA,GAAS,KAAM,cAAe,QAGzD,GAFAH,QAAQC,IAAI,wBAAyBC,IAEhCA,IAAiBA,EAAaE,KAEjC,YADAJ,QAAQK,MAAM,2BAIhBL,QAAQC,IAAI,wCAAyCC,EAAaE,KAAKE,IAEvE,MAAMC,QAA4BJ,EAAAA,EAAAA,GAAS,KAAM,YAAYD,EAAaE,KAAKE,KAAM,OAGrF,GAFAN,QAAQC,IAAI,yBAA0BM,IAEjCA,EAEH,YADAP,QAAQK,MAAM,gCAIhB,IAAKE,EAAoBC,WAEvB,YADAR,QAAQK,MAAM,wCAAyCE,GAIzD,MAAME,EAAYF,EAAoBC,WACtCR,QAAQC,IAAI,6BAA6BQ,KAGzCT,QAAQC,IAAI,8CAA8CJ,wBAA2CY,KACrG,MAAMC,QAAiBP,EAAAA,EAAAA,GAAS,KAAM,0BAA0BN,uBAA0CY,IAAa,OAGvH,GAFAT,QAAQC,IAAI,oBAAqBS,GAE7BA,GAAYA,EAASC,UAAW,CAElC,MAAMC,EAAYF,EAASC,UAAUE,KAAKC,IAAC,CACzCC,KAAMD,EAAEE,aACRC,KAAMH,EAAEI,gBAEVzB,EAAgBmB,GAChBZ,QAAQC,IAAI,UAAUW,EAAUO,kCAAkCV,IACpE,MACET,QAAQC,IAAI,8CAEhB,CAAE,MAAOI,GACPL,QAAQK,MAAM,uBAAwBA,EACxC,CAAC,QACCT,GAAW,EACb,GAGFwB,EAAW,GACV,CAACvB,EAzDc,MA2DdF,GAAgB0B,EAAAA,EAAAA,KAAA,OAAAC,SAAK,6BAEvBD,EAAAA,EAAAA,KAACE,EAAAA,EAAe,CACdC,YAAY,6BACZC,aAAa,UACb5B,UAAU,YACV6B,SAAS,cAGTC,aAAa,0KACbC,cAAc,mBAGdC,SAAS,kIACTC,WAAW,eAGXC,iBAAiB,EACjBvC,aAAcA,EAEdwC,eAAgB,EAChBC,gBAAiB,EACjBC,oBAAqB,IACrB,C","sources":["pages/astronomy/Astrovid1p.js"],"sourcesContent":["import React,{ useEffect, useState } from 'react';\nimport VideoLessonPage from '../../components/VideoLessonPage';\nimport { call_api } from '../../api';\n\nconst Astrovid1p = () => {\n  const [bpqQuestions, setBpqQuestions] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const courseKey = \"astronomy\";\n  const lessonNumber = \"lesson1\";\n  const lesson_id = \"1\";\n\n  useEffect(() => {\n    const fetchBPQs = async () => {\n      try {\n        // Step 1: Get the current user's grade (same as Quiz component)\n        console.log(\"Step 1: Getting user info from auth/verify\");\n        const userResponse = await call_api(null, \"auth/verify\", \"POST\");\n        console.log(\"Auth verify response:\", userResponse);\n        \n        if (!userResponse || !userResponse.user) {\n          console.error(\"Could not get user info\");\n          return;\n        }\n\n        console.log(\"Step 2: Getting user details with ID:\", userResponse.user.id);\n        // Get the full user details to access grade\n        const userDetailsResponse = await call_api(null, `users/id/${userResponse.user.id}`, \"GET\");\n        console.log(\"User details response:\", userDetailsResponse);\n        \n        if (!userDetailsResponse) {\n          console.error(\"Could not fetch user details\");\n          return;\n        }\n        \n        if (!userDetailsResponse.gradeLevel) {\n          console.error(\"User has no grade field. User object:\", userDetailsResponse);\n          return;\n        }\n\n        const userGrade = userDetailsResponse.gradeLevel;\n        console.log(`Step 3: User grade found: ${userGrade}`);\n\n        // Step 4: Now fetch BPQ questions with the user's actual grade\n        console.log(`Step 4: Fetching BPQ questions for course: ${courseKey}, lesson: ${lesson_id}, grade: ${userGrade}`);\n        const response = await call_api(null, `bpqquestions?course_id=${courseKey}&lesson_id=${lesson_id}&grade=${userGrade}`, \"GET\");\n        console.log(\"BPQ API response:\", response);\n        \n        if (response && response.questions) {\n          // Convert backend fields to expected frontend shape\n          const formatted = response.questions.map((q) => ({\n            text: q.questionText,\n            time: q.timeInVideo,\n          }));\n          setBpqQuestions(formatted);\n          console.log(`Loaded ${formatted.length} BPQ questions for grade ${userGrade}`);\n        } else {\n          console.log(\"No BPQ questions found for this grade level\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching BPQs:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBPQs();\n  }, [courseKey, lesson_id]);\n\n  if (loading) return <div>Loading video lesson...</div>;\n  return (\n    <VideoLessonPage \n      lessonTitle=\"Lesson 1: The Solar System\"\n      lessonNumber=\"lesson1\"\n      courseKey=\"astronomy\"\n      videoUrl=\"vy2NuP1ITFo\"\n      \n      // Resource paths\n      slideshowUrl=\"https://docs.google.com/presentation/d/e/2PACX-1vTGK-o-RiizZsV2YB4f_lMoLouCf4yxPvwMFLqZRS4gy53vWsrFJ0Ldf_GbWkPU5ulKrOsByciosSn6/pub?start=false&loop=false&delayms=3000\"\n      worksheetPath=\"/astroworksheet1\"\n      \n      // Notes - parent version\n      notesUrl=\"https://docs.google.com/document/d/e/2PACX-1vTdGKXqqYoyPqLKc0Ld-IO4bzXW_3duz3FE2ftNBGyrckhh9ZmfiISNx_6CL6E0zjrhoD8hLle8ReI_/pub\"\n      notesLabel=\"Parent Notes\"\n      \n      // Version type\n      isParentVersion={true}\n      bpqQuestions={bpqQuestions}\n      // Points configuration\n      maxVideoPoints={7}\n      worksheetPoints={5}\n      completionThreshold={95}\n    />\n  );\n};\n\nexport default Astrovid1p;"],"names":["Astrovid1p","bpqQuestions","setBpqQuestions","useState","loading","setLoading","courseKey","useEffect","async","console","log","userResponse","call_api","user","error","id","userDetailsResponse","gradeLevel","userGrade","response","questions","formatted","map","q","text","questionText","time","timeInVideo","length","fetchBPQs","_jsx","children","VideoLessonPage","lessonTitle","lessonNumber","videoUrl","slideshowUrl","worksheetPath","notesUrl","notesLabel","isParentVersion","maxVideoPoints","worksheetPoints","completionThreshold"],"sourceRoot":""}